<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>自在网站 – </title>
    <link>http://localhost:8081/docs/docker/</link>
    <description>Recent content on 自在网站</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Mon, 29 Dec 2025 15:51:10 +0800</lastBuildDate>
    
	  <atom:link href="http://localhost:8081/docs/docker/index.xml" rel="self" type="application/rss+xml" />
    
    
      
        
      
    
    
    <item>
      <title>Docker基础</title>
      <link>http://localhost:8081/docs/docker/docker%E5%9F%BA%E7%A1%80/</link>
      <pubDate>Fri, 26 Dec 2025 16:35:20 +0800</pubDate>
      
      <guid>http://localhost:8081/docs/docker/docker%E5%9F%BA%E7%A1%80/</guid>
      <description>
        
        
        &lt;h2&gt;一、Docker 核心概念（先搞懂再动手）&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;一docker-核心概念先搞懂再动手&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%b8%80docker-%e6%a0%b8%e5%bf%83%e6%a6%82%e5%bf%b5%e5%85%88%e6%90%9e%e6%87%82%e5%86%8d%e5%8a%a8%e6%89%8b&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;在开始操作前，先明确 3 个核心概念，避免 confusion：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;镜像（Image）&lt;/strong&gt;：Docker 应用的 “安装包”，包含运行应用所需的代码、依赖、环境配置（如 CentOS 镜像、Nginx 镜像）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;容器（Container）&lt;/strong&gt;：镜像的 “运行实例”，是独立的可执行环境（类似轻量级虚拟机，但更高效），多个容器可共享同一个镜像。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;仓库（Repository）&lt;/strong&gt;：存放镜像的 “仓库”（类似 GitHub），官方仓库是 &lt;a href=&#34;https://hub.docker.com/&#34;target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Docke&lt;/a&gt;&lt;a href=&#34;https://hub.docker.com/&#34;target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;r Hub&lt;/a&gt;，包含海量开源镜像。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;二、Docker 安装&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;二docker-安装&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%ba%8cdocker-%e5%ae%89%e8%a3%85&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3&gt;1. CentOS 7 安装步骤&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;1-centos-7-安装步骤&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#1-centos-7-%e5%ae%89%e8%a3%85%e6%ad%a5%e9%aa%a4&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;div class=&#34;hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code&#34;&gt;

&lt;div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 1. 卸载旧版本（若有）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yum remove docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 2. 安装依赖包&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yum install -y yum-utils device-mapper-persistent-data lvm2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 3. 设置 Docker 官方仓库（国内推荐阿里云镜像加速）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 4. 安装 Docker CE（社区版，免费）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;yum install -y docker-ce docker-ce-cli containerd.io
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 5. 启动 Docker 并设置开机自启&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl start docker
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl &lt;span class=&#34;nb&#34;&gt;enable&lt;/span&gt; docker
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 6. 验证安装成功（显示版本即正常）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker --version&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0&#34;&gt;
  &lt;button
    class=&#34;hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50&#34;
    title=&#34;复制代码&#34;
  &gt;
    &lt;div class=&#34;hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
&lt;div class=&#34;hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
  &lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3&gt;2. 配置国内镜像加速（解决拉取镜像慢的问题）&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;2-配置国内镜像加速解决拉取镜像慢的问题&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#2-%e9%85%8d%e7%bd%ae%e5%9b%bd%e5%86%85%e9%95%9c%e5%83%8f%e5%8a%a0%e9%80%9f%e8%a7%a3%e5%86%b3%e6%8b%89%e5%8f%96%e9%95%9c%e5%83%8f%e6%85%a2%e7%9a%84%e9%97%ae%e9%a2%98&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;默认从 Docker Hub 拉取镜像较慢，配置阿里云 / 网易云加速：&lt;/p&gt;
&lt;div class=&#34;hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code&#34;&gt;

&lt;div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 1. 创建配置目录&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir -p /etc/docker
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 2. 编写配置文件（以下加速地址暂时可用）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cat &amp;gt; /etc/docker/daemon.json &lt;span class=&#34;s&#34;&gt;&amp;lt;&amp;lt;EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  &amp;#34;registry-mirrors&amp;#34;: [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    &amp;#34;https://docker.1ms.run&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    &amp;#34;https://docker.m.ixdev.cn&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    &amp;#34;http://docker.m.daocloud.io&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    &amp;#34;https://dockerproxy.net&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    &amp;#34;https://xdark.top&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  ],
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  &amp;#34;log-opts&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    &amp;#34;max-size&amp;#34;: &amp;#34;100m&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    &amp;#34;max-file&amp;#34;: &amp;#34;10&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 3. 重启 Docker 生效&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl daemon-reload
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;systemctl restart docker
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 4. 验证加速是否生效（显示配置的镜像地址即成功）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker info &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep &lt;span class=&#34;s2&#34;&gt;&amp;#34;Registry Mirrors&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0&#34;&gt;
  &lt;button
    class=&#34;hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50&#34;
    title=&#34;复制代码&#34;
  &gt;
    &lt;div class=&#34;hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
&lt;div class=&#34;hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
  &lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2&gt;三、Docker 核心命令&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;三docker-核心命令&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%b8%89docker-%e6%a0%b8%e5%bf%83%e5%91%bd%e4%bb%a4&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;命令&lt;/th&gt;
          &lt;th&gt;功能&lt;/th&gt;
          &lt;th&gt;示例&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker pull 镜像名:标签&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;拉取镜像（标签默认 latest，即最新版）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker pull nginx:1.24&lt;/code&gt;（拉取 Nginx 1.24 版本）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker images&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;查看本地所有镜像&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker images&lt;/code&gt;（显示镜像名、标签、ID、大小）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker rmi 镜像ID/镜像名&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;删除镜像（需先停止依赖该镜像的容器）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker rmi nginx:1.24&lt;/code&gt; 或 &lt;code&gt;docker rmi 0e901e68141f&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker search 镜像名&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;搜索 Docker Hub 上的镜像&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker search mysql&lt;/code&gt;（搜索 MySQL 镜像）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker save -o 文件名.tar 镜像名&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;导出镜像到本地文件&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker save -o nginx.tar nginx:1.24&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker load -i 文件名.tar&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;从本地文件导入镜像&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker load -i nginx.tar&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker ps&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;查看运行中的容器&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker ps&lt;/code&gt;（&lt;code&gt;-a&lt;/code&gt; 查看所有容器，包括停止的）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker start 容器名/容器ID&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;启动已停止的容器&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker start mynginx&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker stop 容器名/容器ID&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;停止运行中的容器&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker stop mynginx&lt;/code&gt;（&lt;code&gt;kill&lt;/code&gt; 强制停止：&lt;code&gt;docker kill mynginx&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker restart 容器名/容器ID&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;重启容器&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker restart mynginx&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker exec -it 容器名/容器ID 命令&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;进入运行中的容器（交互式）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker exec -it mynginx /bin/bash&lt;/code&gt;（进入 Nginx 容器终端）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker logs 容器名/容器ID&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;查看容器日志&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker logs -f mynginx&lt;/code&gt;（&lt;code&gt;-f&lt;/code&gt; 实时跟踪日志）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker rm 容器名/容器ID&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;删除容器（需先停止容器）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker rm mynginx&lt;/code&gt;（强制删除运行中的容器：&lt;code&gt;docker rm -f mynginx&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;docker inspect 容器名/容器ID&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;查看容器详细信息（IP、挂载等）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;docker inspect mynginx&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;四、清理磁盘空间&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;四清理磁盘空间&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e5%9b%9b%e6%b8%85%e7%90%86%e7%a3%81%e7%9b%98%e7%a9%ba%e9%97%b4&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div class=&#34;hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code&#34;&gt;

&lt;div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 清理停止的容器&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker container prune
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 清理无用镜像（无标签、未被容器使用）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker image prune -a
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 清理无用数据卷&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker volume prune
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# 一键清理所有无用资源（容器、镜像、网络、数据卷）&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker system prune -af&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0&#34;&gt;
  &lt;button
    class=&#34;hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50&#34;
    title=&#34;复制代码&#34;
  &gt;
    &lt;div class=&#34;hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
&lt;div class=&#34;hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
  &lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;

      </description>
    </item>
    
    <item>
      <title>Docker配置</title>
      <link>http://localhost:8081/docs/docker/docker%E9%85%8D%E7%BD%AE/</link>
      <pubDate>Mon, 29 Dec 2025 15:51:10 +0800</pubDate>
      
      <guid>http://localhost:8081/docs/docker/docker%E9%85%8D%E7%BD%AE/</guid>
      <description>
        
        
        &lt;p&gt;&lt;code&gt;/etc/docker/daemon.json&lt;/code&gt; 是 Docker 守护进程（dockerd）的核心配置文件，用于自定义 Docker 的运行参数（如镜像加速、网络、存储、日志等）。默认情况下该文件可能不存在，需手动创建并配置，修改后需重启 Docker 服务生效。&lt;/p&gt;
&lt;h2&gt;一、配置文件基础说明&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;一配置文件基础说明&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%b8%80%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%9f%ba%e7%a1%80%e8%af%b4%e6%98%8e&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3&gt;1. 文件格式&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;1-文件格式&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#1-%e6%96%87%e4%bb%b6%e6%a0%bc%e5%bc%8f&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;严格遵循 &lt;strong&gt;JSON 语法&lt;/strong&gt;（键值对、逗号分隔、字符串用双引号）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;注释：JSON 本身不支持注释，若需添加注释，需使用工具（如 &lt;code&gt;jq&lt;/code&gt;）处理，或部署时移除注释。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;生效方式：修改后执行 &lt;code&gt;systemctl daemon-reload &amp;amp;&amp;amp; systemctl restart docker&lt;/code&gt; 重启 Docker 服务。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;验证配置：&lt;code&gt;docker info&lt;/code&gt; 可查看配置是否生效（如镜像加速地址、存储驱动等）。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;2. 默认配置路径&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;2-默认配置路径&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#2-%e9%bb%98%e8%ae%a4%e9%85%8d%e7%bd%ae%e8%b7%af%e5%be%84&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Linux：&lt;code&gt;/etc/docker/daemon.json&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Windows：&lt;code&gt;C:\ProgramData\docker\config\daemon.json&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;macOS（Docker Desktop）：通过 GUI 配置（偏好设置 → Docker Engine），底层对应 &lt;code&gt;~/.docker/daemon.json&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;二、核心配置参数详解（按功能分类）&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;二核心配置参数详解按功能分类&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%ba%8c%e6%a0%b8%e5%bf%83%e9%85%8d%e7%bd%ae%e5%8f%82%e6%95%b0%e8%af%a6%e8%a7%a3%e6%8c%89%e5%8a%9f%e8%83%bd%e5%88%86%e7%b1%bb&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;h3&gt;1. 镜像加速配置（最常用）&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;1-镜像加速配置最常用&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#1-%e9%95%9c%e5%83%8f%e5%8a%a0%e9%80%9f%e9%85%8d%e7%bd%ae%e6%9c%80%e5%b8%b8%e7%94%a8&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;解决 Docker 拉取镜像慢的问题，优先配置国内镜像源。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;类型&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
          &lt;th&gt;示例&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;registry-mirrors&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;数组（字符串）&lt;/td&gt;
          &lt;td&gt;镜像仓库加速地址列表，按顺序优先级匹配&lt;/td&gt;
          &lt;td&gt;阿里云、网易云、Docker 中国官方加速&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;示例配置&lt;/strong&gt;：&lt;/p&gt;
&lt;div class=&#34;hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code&#34;&gt;

&lt;div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;registry-mirrors&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://xxxx.mirror.aliyuncs.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// 阿里云专属加速（需登录阿里云容器镜像服务获取）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://hub-mirror.c.163.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;      &lt;span class=&#34;c1&#34;&gt;// 网易云加速（公开）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://docker.mirrors.ustc.edu.cn&amp;#34;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// 中科大加速（公开）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0&#34;&gt;
  &lt;button
    class=&#34;hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50&#34;
    title=&#34;复制代码&#34;
  &gt;
    &lt;div class=&#34;hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
&lt;div class=&#34;hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
  &lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3&gt;2. 网络配置&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;2-网络配置&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#2-%e7%bd%91%e7%bb%9c%e9%85%8d%e7%bd%ae&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;自定义 Docker 网络相关参数（如默认网段、端口映射范围、DNS 等）。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;类型&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
          &lt;th&gt;示例&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;bip&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;字符串&lt;/td&gt;
          &lt;td&gt;桥接网络（bridge）的默认网关和子网&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;bip&amp;quot;: &amp;quot;172.17.0.1/16&amp;quot;&lt;/code&gt;（默认是 172.17.0.1/16）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;default-address-pools&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;数组&lt;/td&gt;
          &lt;td&gt;自定义 Docker 网络地址池（避免与内网网段冲突）&lt;/td&gt;
          &lt;td&gt;见下方示例&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;dns&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;数组（字符串）&lt;/td&gt;
          &lt;td&gt;容器默认 DNS 服务器列表&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;dns&amp;quot;: [&amp;quot;223.5.5.5&amp;quot;, &amp;quot;8.8.8.8&amp;quot;]&lt;/code&gt;（阿里云 DNS + Google DNS）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;dns-search&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;数组（字符串）&lt;/td&gt;
          &lt;td&gt;DNS 搜索域（容器内解析域名时自动拼接）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;dns-search&amp;quot;: [&amp;quot;docker.internal&amp;quot;, &amp;quot;company.com&amp;quot;]&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;ipv6&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;布尔值&lt;/td&gt;
          &lt;td&gt;是否启用 IPv6 支持&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;ipv6&amp;quot;: true&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;fixed-cidr-v6&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;字符串&lt;/td&gt;
          &lt;td&gt;IPv6 固定子网&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;fixed-cidr-v6&amp;quot;: &amp;quot;2001:db8::/64&amp;quot;&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;port-range&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;字符串&lt;/td&gt;
          &lt;td&gt;允许 Docker 映射的端口范围（默认 49153-65535）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;port-range&amp;quot;: &amp;quot;30000-32767&amp;quot;&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;示例配置（解决网段冲突）&lt;/strong&gt;：&lt;/p&gt;
&lt;div class=&#34;hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code&#34;&gt;

&lt;div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;bip&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;172.31.0.1/16&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// 自定义 bridge 网络网关和子网
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;default-address-pools&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nt&#34;&gt;&amp;#34;base&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;172.32.0.0/16&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nt&#34;&gt;&amp;#34;size&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;24&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nt&#34;&gt;&amp;#34;base&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;172.33.0.0/16&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nt&#34;&gt;&amp;#34;size&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;24&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;dns&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;223.5.5.5&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;8.8.8.8&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0&#34;&gt;
  &lt;button
    class=&#34;hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50&#34;
    title=&#34;复制代码&#34;
  &gt;
    &lt;div class=&#34;hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
&lt;div class=&#34;hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
  &lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3&gt;3. 存储配置&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;3-存储配置&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#3-%e5%ad%98%e5%82%a8%e9%85%8d%e7%bd%ae&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;自定义 Docker 存储驱动、数据存储路径、镜像和容器限制等。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;类型&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
          &lt;th&gt;示例&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;data-root&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;字符串&lt;/td&gt;
          &lt;td&gt;Docker 数据存储根目录（默认 &lt;code&gt;/var/lib/docker&lt;/code&gt;）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;data-root&amp;quot;: &amp;quot;/data/docker&amp;quot;&lt;/code&gt;（迁移 Docker 数据到 &lt;code&gt;/data&lt;/code&gt; 分区）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;storage-driver&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;字符串&lt;/td&gt;
          &lt;td&gt;存储驱动（推荐 &lt;code&gt;overlay2&lt;/code&gt;，Docker 18.09+ 默认）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;storage-driver&amp;quot;: &amp;quot;overlay2&amp;quot;&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;storage-opts&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;数组（字符串）&lt;/td&gt;
          &lt;td&gt;存储驱动额外参数（如 overlay2 的日志大小限制）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;storage-opts&amp;quot;: [&amp;quot;overlay2.override_kernel_check=true&amp;quot;, &amp;quot;overlay2.size=100G&amp;quot;]&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;max-concurrent-downloads&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;整数&lt;/td&gt;
          &lt;td&gt;同时下载镜像的最大线程数（默认 3，提升下载速度）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;max-concurrent-downloads&amp;quot;: 10&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;max-concurrent-uploads&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;整数&lt;/td&gt;
          &lt;td&gt;同时上传镜像的最大线程数（默认 5）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;max-concurrent-uploads&amp;quot;: 5&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;log-driver&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;字符串&lt;/td&gt;
          &lt;td&gt;容器日志驱动（默认 &lt;code&gt;json-file&lt;/code&gt;，可选 &lt;code&gt;journald&lt;/code&gt;、&lt;code&gt;syslog&lt;/code&gt;、&lt;code&gt;fluentd&lt;/code&gt; 等）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;log-driver&amp;quot;: &amp;quot;json-file&amp;quot;&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;log-opts&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;对象&lt;/td&gt;
          &lt;td&gt;日志驱动参数（如日志大小、滚动数量）&lt;/td&gt;
          &lt;td&gt;见下方示例&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;示例配置（存储优化 + 日志限制）&lt;/strong&gt;：&lt;/p&gt;
&lt;div class=&#34;hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code&#34;&gt;

&lt;div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;data-root&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/data/docker&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// 迁移数据目录到大容量分区
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;storage-driver&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;overlay2&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;storage-opts&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;overlay2.size=100G&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// 每个容器最大磁盘占用 100G
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;max-concurrent-downloads&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;          &lt;span class=&#34;c1&#34;&gt;// 加速镜像下载
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;log-driver&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;json-file&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;log-opts&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;max-size&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;10m&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// 单个日志文件最大 10MB
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;max-file&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;3&amp;#34;&lt;/span&gt;     &lt;span class=&#34;c1&#34;&gt;// 最多保留 3 个日志文件（滚动删除）
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0&#34;&gt;
  &lt;button
    class=&#34;hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50&#34;
    title=&#34;复制代码&#34;
  &gt;
    &lt;div class=&#34;hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
&lt;div class=&#34;hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
  &lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3&gt;4. 安全配置&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;4-安全配置&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#4-%e5%ae%89%e5%85%a8%e9%85%8d%e7%bd%ae&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;限制 Docker 权限、启用 TLS 认证、配置信任镜像仓库等。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;类型&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
          &lt;th&gt;示例&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;tls&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;布尔值&lt;/td&gt;
          &lt;td&gt;是否启用 TLS 认证（远程访问 Docker 时加密）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;tls&amp;quot;: true&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;tlscacert&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;字符串&lt;/td&gt;
          &lt;td&gt;TLS 根证书路径&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;tlscacert&amp;quot;: &amp;quot;/etc/docker/ca.pem&amp;quot;&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;tlscert&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;字符串&lt;/td&gt;
          &lt;td&gt;TLS 客户端证书路径&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;tlscert&amp;quot;: &amp;quot;/etc/docker/cert.pem&amp;quot;&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;tlskey&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;字符串&lt;/td&gt;
          &lt;td&gt;TLS 客户端密钥路径&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;tlskey&amp;quot;: &amp;quot;/etc/docker/key.pem&amp;quot;&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;tlsverify&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;布尔值&lt;/td&gt;
          &lt;td&gt;是否验证服务端证书&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;tlsverify&amp;quot;: true&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;insecure-registries&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;数组（字符串）&lt;/td&gt;
          &lt;td&gt;信任的非 HTTPS 镜像仓库（如私有仓库）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;insecure-registries&amp;quot;: [&amp;quot;192.168.1.100:5000&amp;quot;]&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;allow-nondistributable-artifacts&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;数组（字符串）&lt;/td&gt;
          &lt;td&gt;允许推送非分布式镜像到指定仓库&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;allow-nondistributable-artifacts&amp;quot;: [&amp;quot;192.168.1.100:5000&amp;quot;]&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;live-restore&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;布尔值&lt;/td&gt;
          &lt;td&gt;Docker 守护进程重启时，保持容器运行（避免服务中断）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;live-restore&amp;quot;: true&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;示例配置（私有仓库信任 + TLS 认证）&lt;/strong&gt;：&lt;/p&gt;
&lt;div class=&#34;hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code&#34;&gt;

&lt;div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;insecure-registries&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;192.168.1.100:5000&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// 信任内网 HTTP 私有仓库
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;tls&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;tlscacert&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/docker/ca.pem&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;tlscert&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/docker/server-cert.pem&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;tlskey&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/etc/docker/server-key.pem&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;tlsverify&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;live-restore&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;  &lt;span class=&#34;c1&#34;&gt;// 守护进程重启不影响运行中的容器
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0&#34;&gt;
  &lt;button
    class=&#34;hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50&#34;
    title=&#34;复制代码&#34;
  &gt;
    &lt;div class=&#34;hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
&lt;div class=&#34;hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
  &lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3&gt;5. 资源限制配置&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;5-资源限制配置&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#5-%e8%b5%84%e6%ba%90%e9%99%90%e5%88%b6%e9%85%8d%e7%bd%ae&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;p&gt;限制 Docker 占用的系统资源（CPU、内存、PID 等）。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;类型&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
          &lt;th&gt;示例&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;default-shm-size&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;字符串&lt;/td&gt;
          &lt;td&gt;容器默认共享内存大小（默认 64M，部分服务如 Chrome、Elasticsearch 需增大）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;default-shm-size&amp;quot;: &amp;quot;2G&amp;quot;&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;oom-score-adjust&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;整数&lt;/td&gt;
          &lt;td&gt;Docker 守护进程的 OOM 优先级（-1000 到 1000，数值越低越不容易被 OOM 杀死）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;oom-score-adjust&amp;quot;: -1000&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;max-pids&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;整数&lt;/td&gt;
          &lt;td&gt;所有容器的最大 PID 总数限制（避免容器占用过多进程）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;max-pids&amp;quot;: 10000&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;cpu-shares&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;整数&lt;/td&gt;
          &lt;td&gt;Docker 整体 CPU 权重（相对值，默认 1024）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;cpu-shares&amp;quot;: 2048&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;memory-limit&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;字符串&lt;/td&gt;
          &lt;td&gt;Docker 整体内存限制（默认无限制）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;memory-limit&amp;quot;: &amp;quot;16G&amp;quot;&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;示例配置（资源限制）&lt;/strong&gt;：&lt;/p&gt;
&lt;div class=&#34;hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code&#34;&gt;

&lt;div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;default-shm-size&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;2G&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;// 默认共享内存 2G
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;oom-score-adjust&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;-1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;   &lt;span class=&#34;c1&#34;&gt;// 避免 Docker 被 OOM 杀死
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;max-pids&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;10000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;           &lt;span class=&#34;c1&#34;&gt;// 最大进程数 10000
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;memory-limit&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;16G&amp;#34;&lt;/span&gt;        &lt;span class=&#34;c1&#34;&gt;// 限制 Docker 总内存占用不超过 16G
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0&#34;&gt;
  &lt;button
    class=&#34;hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50&#34;
    title=&#34;复制代码&#34;
  &gt;
    &lt;div class=&#34;hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
&lt;div class=&#34;hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
  &lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h3&gt;6. 其他实用配置&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;6-其他实用配置&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#6-%e5%85%b6%e4%bb%96%e5%ae%9e%e7%94%a8%e9%85%8d%e7%bd%ae&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;类型&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
          &lt;th&gt;示例&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;experimental&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;布尔值&lt;/td&gt;
          &lt;td&gt;是否启用 Docker 实验性特性（如 Buildx、IPv6 等）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;experimental&amp;quot;: true&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;features&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;对象&lt;/td&gt;
          &lt;td&gt;启用特定特性（如 &lt;code&gt;buildkit&lt;/code&gt; 构建引擎）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;features&amp;quot;: {&amp;quot;buildkit&amp;quot;: true}&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;labels&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;数组（字符串）&lt;/td&gt;
          &lt;td&gt;给 Docker 守护进程添加标签（用于集群管理）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;labels&amp;quot;: [&amp;quot;env=production&amp;quot;, &amp;quot;owner=devops&amp;quot;]&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;log-level&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;字符串&lt;/td&gt;
          &lt;td&gt;日志级别（&lt;code&gt;debug&lt;/code&gt;/&lt;code&gt;info&lt;/code&gt;/&lt;code&gt;warn&lt;/code&gt;/&lt;code&gt;error&lt;/code&gt;/&lt;code&gt;fatal&lt;/code&gt;，默认 &lt;code&gt;info&lt;/code&gt;）&lt;/td&gt;
          &lt;td&gt;&lt;code&gt;&amp;quot;log-level&amp;quot;: &amp;quot;warn&amp;quot;&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

      </description>
    </item>
    
    <item>
      <title>Docker网络</title>
      <link>http://localhost:8081/docs/docker/docker%E7%BD%91%E7%BB%9C/</link>
      <pubDate>Fri, 26 Dec 2025 16:35:37 +0800</pubDate>
      
      <guid>http://localhost:8081/docs/docker/docker%E7%BD%91%E7%BB%9C/</guid>
      <description>
        
        
        &lt;p&gt;待编写&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Docker存储</title>
      <link>http://localhost:8081/docs/docker/docker%E5%AD%98%E5%82%A8/</link>
      <pubDate>Fri, 26 Dec 2025 16:35:28 +0800</pubDate>
      
      <guid>http://localhost:8081/docs/docker/docker%E5%AD%98%E5%82%A8/</guid>
      <description>
        
        
        &lt;p&gt;待编写&lt;/p&gt;

      </description>
    </item>
    
    <item>
      <title>Dockerfile基础</title>
      <link>http://localhost:8081/docs/docker/dockerfile%E5%9F%BA%E7%A1%80/</link>
      <pubDate>Fri, 26 Dec 2025 16:38:12 +0800</pubDate>
      
      <guid>http://localhost:8081/docs/docker/dockerfile%E5%9F%BA%E7%A1%80/</guid>
      <description>
        
        
        &lt;h2&gt;一、Dockerfile 指令核心分类&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;一dockerfile-指令核心分类&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%b8%80dockerfile-%e6%8c%87%e4%bb%a4%e6%a0%b8%e5%bf%83%e5%88%86%e7%b1%bb&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Dockerfile 是构建 Docker 镜像的文本文件，指令按功能可分为 &lt;strong&gt;7 大核心模块&lt;/strong&gt;，涵盖基础镜像选择、构建参数配置、文件操作、环境配置、运行命令、容器启动设置等全流程，所有指令大小写不敏感，但惯例使用大写以区分参数。&lt;/p&gt;
&lt;h2&gt;二、基础镜像与构建阶段模块&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;二基础镜像与构建阶段模块&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%ba%8c%e5%9f%ba%e7%a1%80%e9%95%9c%e5%83%8f%e4%b8%8e%e6%9e%84%e5%bb%ba%e9%98%b6%e6%ae%b5%e6%a8%a1%e5%9d%97&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;该模块指令用于指定构建的基础镜像、构建阶段划分及跨平台适配，是镜像构建的起点。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;指令&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;FROM&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;必选指令，指定构建的基础镜像（格式：&lt;code&gt;镜像名:标签&lt;/code&gt;），所有后续指令基于该镜像执行；支持 `AS 语法，用于多阶段构建（不同阶段可使用不同基础镜像，最终仅保留目标阶段内容，减小镜像体积）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;FROM --platform&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;扩展 &lt;code&gt;FROM&lt;/code&gt; 指令，指定基础镜像的目标架构（如 &lt;code&gt;linux/amd64&lt;/code&gt;、&lt;code&gt;linux/arm64&lt;/code&gt;、&lt;code&gt;windows/amd64&lt;/code&gt;），适配多架构镜像构建，解决跨平台部署问题&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;ARG&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;定义构建阶段专用参数，仅在 &lt;code&gt;docker build&lt;/code&gt; 过程中生效，容器运行时不可用；支持设置默认值（如 &lt;code&gt;ARG APP_VERSION=1.0&lt;/code&gt;），可通过 &lt;code&gt;docker build --build-arg &amp;lt;参数名&amp;gt;=&amp;gt;&lt;/code&gt; 命令覆盖默认值；&lt;code&gt;ARG&lt;/code&gt; 指令需在引用它的指令之前定义，且在 &lt;code&gt;FROM&lt;/code&gt; 之前定义的 &lt;code&gt;ARG&lt;/code&gt; 仅能在 &lt;code&gt;FROM&lt;/code&gt; 指令中使用&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;FROM --build-arg&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;结合 &lt;code&gt;ARG&lt;/code&gt; 使用，在指定基础镜像时传递构建参数（如 &lt;code&gt;FROM --build-arg HTTP_PROXY=xxx ubuntu:22.04&lt;/code&gt;），用于基础镜像构建过程中的参数配置&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;三、文件操作与目录配置模块&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;三文件操作与目录配置模块&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%b8%89%e6%96%87%e4%bb%b6%e6%93%8d%e4%bd%9c%e4%b8%8e%e7%9b%ae%e5%bd%95%e9%85%8d%e7%bd%ae%e6%a8%a1%e5%9d%97&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;该模块指令用于在镜像中复制文件、创建目录、设置工作目录，控制镜像内的文件结构。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;指令&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;COPY&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;将本地主机的文件 / 目录复制到镜像的指定路径；支持通配符（如 &lt;code&gt;COPY *.txt /app/&lt;/code&gt;）；复制时保持源文件的权限属性；如果目标路径不存在，会自动创建；语法：&lt;code&gt;COPY &amp;lt;源路径&amp;gt;... &amp;lt;目标路径&amp;gt;&lt;/code&gt; 或 &lt;code&gt;COPY [&amp;quot;&amp;gt;&amp;quot;, &amp;quot; ..., &amp;quot;&amp;quot;]&lt;/code&gt;（源路径含空格时需用引号包裹）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;ADD&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;功能与 &lt;code&gt;COPY&lt;/code&gt; 类似，额外支持：1. 自动解压本地压缩文件（如 &lt;code&gt;.tar&lt;/code&gt;、&lt;code&gt;.gz&lt;/code&gt;、&lt;code&gt;.zip&lt;/code&gt;）到目标路径；2. 支持 URL 作为源路径，自动下载文件到目标路径（不推荐，建议用 &lt;code&gt;RUN wget/curl&lt;/code&gt; 替代，便于控制下载过程）；语法与 &lt;code&gt;COPY&lt;/code&gt; 一致&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;WORKDIR&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;设置容器启动后的默认工作目录，后续的 &lt;code&gt;RUN&lt;/code&gt;、&lt;code&gt;CMD&lt;/code&gt;、&lt;code&gt;ENTRYPOINT&lt;/code&gt;、&lt;code&gt;COPY&lt;/code&gt;、&lt;code&gt;ADD&lt;/code&gt; 等指令会在该目录下执行；如果目录不存在，会自动创建；支持多次使用（每次使用会切换到新目录，如 &lt;code&gt;WORKDIR /app&lt;/code&gt; → &lt;code&gt;WORKDIR src&lt;/code&gt;，最终工作目录为 &lt;code&gt;/app/src&lt;/code&gt;）；路径支持相对路径和绝对路径&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;VOLUME&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;声明容器运行时的持久化数据卷（仅声明，实际挂载需在 &lt;code&gt;docker run&lt;/code&gt; 时指定主机路径或命名卷）；用于存储容器运行时产生的动态数据（如数据库文件、日志），避免容器删除后数据丢失；支持单个路径（如 &lt;code&gt;VOLUME /data&lt;/code&gt;）或多个路径（如 &lt;code&gt;VOLUME [&amp;quot;/data&amp;quot;, &amp;quot;/logs&amp;quot;]&lt;/code&gt;）；声明的卷在容器启动时会自动创建，且权限为 &lt;code&gt;root:root&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;四、环境配置模块&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;四环境配置模块&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e5%9b%9b%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae%e6%a8%a1%e5%9d%97&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;该模块指令用于配置容器运行时的环境变量、用户权限、内核参数等，影响容器运行状态。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;指令&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;ENV&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;设置容器运行时的环境变量（构建阶段和运行阶段均生效）；支持两种格式：&lt;code&gt;ENV &amp;lt;键&amp;gt;=&amp;lt;值&amp;gt;&lt;/code&gt;（单个变量）或 &lt;code&gt;ENV &amp;gt; &amp;lt;值1&amp;gt; &amp;lt;键2&amp;gt; &amp;gt;&lt;/code&gt;（多个变量）；后续指令（&lt;code&gt;RUN&lt;/code&gt;、&lt;code&gt;CMD&lt;/code&gt; 等）可直接引用（如 &lt;code&gt;ENV PATH=/app/bin:$PATH&lt;/code&gt;）；容器运行时可通过 &lt;code&gt;docker run -e &amp;lt;值&amp;gt;&lt;/code&gt; 覆盖默认值&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;USER&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;指定容器运行时的用户（默认以 &lt;code&gt;root&lt;/code&gt; 用户运行）；支持用户名、UID、UID:GID 格式（如 &lt;code&gt;USER appuser&lt;/code&gt;、&lt;code&gt;USER 1000&lt;/code&gt;、&lt;code&gt;USER 1000:1000&lt;/code&gt;）；使用非 root 用户可提高容器安全性；&lt;code&gt;USER&lt;/code&gt; 指令之后的所有指令（&lt;code&gt;RUN&lt;/code&gt;、&lt;code&gt;CMD&lt;/code&gt; 等）都会以该用户身份执行；如需切换回 root 用户，可再次使用 &lt;code&gt;USER root&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;SHELL&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;指定容器内的默认 shell 程序，用于 &lt;code&gt;RUN&lt;/code&gt;、&lt;code&gt;CMD&lt;/code&gt;、&lt;code&gt;ENTRYPOINT&lt;/code&gt; 等指令的命令执行；默认 shell：Linux 镜像为 &lt;code&gt;/bin/sh -c&lt;/code&gt;，Windows 镜像为 &lt;code&gt;cmd /S /C&lt;/code&gt;；语法：&lt;code&gt;SHELL [&amp;quot;&amp;lt;shell路径&amp;gt;&amp;quot;, &amp;quot;&amp;lt;参数&amp;gt;&amp;quot;]&lt;/code&gt;（如 &lt;code&gt;SHELL [&amp;quot;/bin/bash&amp;quot;, &amp;quot;-c&amp;quot;]&lt;/code&gt;，让 &lt;code&gt;RUN&lt;/code&gt; 指令使用 bash 执行命令）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;ENV --unset&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;移除已设置的环境变量（如 &lt;code&gt;ENV --unset HTTP_PROXY&lt;/code&gt;），用于清理构建过程中临时设置的环境变量，减少镜像冗余&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;LABEL&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;为镜像添加元数据标签（键值对格式），用于分类、筛选、说明镜像信息（如作者、版本、用途）；支持单个标签（&lt;code&gt;LABEL maintainer=devops@example.com&lt;/code&gt;）或多个标签（&lt;code&gt;LABEL com.example.version=1.0 com.example.env=prod&lt;/code&gt;）；可通过 &lt;code&gt;docker inspect &amp;gt;&lt;/code&gt; 查看标签信息；多个 &lt;code&gt;LABEL&lt;/code&gt; 指令会合并为一个，建议集中编写&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;五、运行命令与依赖安装模块&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;五运行命令与依赖安装模块&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%ba%94%e8%bf%90%e8%a1%8c%e5%91%bd%e4%bb%a4%e4%b8%8e%e4%be%9d%e8%b5%96%e5%ae%89%e8%a3%85%e6%a8%a1%e5%9d%97&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;该模块指令用于在构建镜像时执行命令（如安装依赖、编译程序、配置系统），指令执行结果会被固化到镜像层。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;指令&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;RUN&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;构建阶段执行命令，每个 &lt;code&gt;RUN&lt;/code&gt; 指令会创建一个新的镜像层；支持两种格式：1. 壳层格式（&lt;code&gt;RUN &amp;lt;命令&amp;gt;&lt;/code&gt;）：通过默认 shell 执行（如 &lt;code&gt;/bin/sh -c&lt;/code&gt;），支持管道、变量替换等壳层特性（如 &lt;code&gt;RUN apt update &amp;amp;&amp;amp; apt install -y nginx&lt;/code&gt;）；2. exec 格式（&lt;code&gt;RUN [&amp;quot;&amp;lt;可执行文件&amp;gt;&amp;quot;, &amp;quot;&amp;lt;参数1&amp;gt;&amp;quot;, &amp;quot;&amp;gt;&amp;quot;]&lt;/code&gt;）：直接执行可执行文件，不通过 shell，避免字符转义问题，且信号能直接传递（如 &lt;code&gt;RUN [&amp;quot;/usr/bin/wget&amp;quot;, &amp;quot;https://example.com/file.tar.gz&amp;quot;]&lt;/code&gt;）；建议将多个相关命令合并为一个 &lt;code&gt;RUN&lt;/code&gt; 指令（用 &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt; 连接），减少镜像层数，减小镜像体积&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;RUN --mount&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;构建阶段临时挂载文件系统（仅在当前 &lt;code&gt;RUN&lt;/code&gt; 指令执行期间有效，指令结束后挂载消失），用于构建时的依赖缓存、秘密数据挂载等场景；支持多种挂载类型：&lt;code&gt;type=bind&lt;/code&gt;（绑定本地目录）、&lt;code&gt;type=cache&lt;/code&gt;（缓存目录，加速多次构建）、&lt;code&gt;type=secret&lt;/code&gt;（挂载秘密文件，避免明文暴露）、&lt;code&gt;type=tmpfs&lt;/code&gt;（临时文件系统）；语法：&lt;code&gt;RUN --mount=type=&amp;lt;类型&amp;gt;,src=路径&amp;gt;,dst=&amp;gt;  &lt;/code&gt;RUN &amp;ndash;mount=type=cache,target=/var/cache/apt apt update &amp;amp;&amp;amp; apt install -y nginx`）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;RUN --network&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;控制 &lt;code&gt;RUN&lt;/code&gt; 指令执行时的网络模式（如 &lt;code&gt;--network=none&lt;/code&gt; 禁用网络，&lt;code&gt;--network=host&lt;/code&gt; 共享主机网络，&lt;code&gt;--network=连接指定网络）；默认网络模式为 &lt;/code&gt;default`（容器网络）；用于控制构建过程中是否允许网络访问（如禁用网络以确保构建不依赖外部资源）&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;六、容器启动配置模块&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;六容器启动配置模块&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e5%85%ad%e5%ae%b9%e5%99%a8%e5%90%af%e5%8a%a8%e9%85%8d%e7%bd%ae%e6%a8%a1%e5%9d%97&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;该模块指令用于设置容器启动时的默认行为（如启动命令、入口点、暴露端口），影响容器运行时的初始状态。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;指令&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;CMD&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;指定容器启动时的默认命令，容器启动后仅执行一次；支持三种格式：1. 壳层格式（&lt;code&gt;CMD ：通过默认 shell 执行（如 &lt;/code&gt;CMD nginx -g &amp;lsquo;daemon off;&amp;rsquo;&lt;code&gt;）；2. exec 格式（&lt;/code&gt;CMD [&amp;quot;&amp;quot;&amp;lt; 参数 1&amp;gt;&amp;quot;, &amp;ldquo;2&amp;gt;&amp;rdquo;]&lt;code&gt;）：推荐格式，直接执行可执行文件（如 &lt;/code&gt;CMD [&amp;ldquo;nginx&amp;rdquo;, &amp;ldquo;-g&amp;rdquo;, &amp;ldquo;daemon off;&amp;rdquo;]&lt;code&gt;）；3. 参数格式（&lt;/code&gt;CMD [&amp;quot;&amp;lt; 参数 1&amp;gt;&amp;quot;, &amp;ldquo;&amp;gt;&amp;rdquo;]&lt;code&gt;）：配合 &lt;/code&gt;ENTRYPOINT&lt;code&gt;使用，为入口点传递默认参数；一个 Dockerfile 中仅能有一个&lt;/code&gt;CMD&lt;code&gt;指令，多个&lt;/code&gt;CMD&lt;code&gt; 仅最后一个生效；&lt;/code&gt;docker run&lt;code&gt;命令后指定的参数会覆盖&lt;/code&gt;CMD` 的默认值&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;ENTRYPOINT&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;定义容器的入口点（即容器启动时执行的可执行程序），与 &lt;code&gt;CMD&lt;/code&gt; 配合使用时，&lt;code&gt;CMD&lt;/code&gt; 仅作为参数传递给 &lt;code&gt;ENTRYPOINT&lt;/code&gt;；支持两种格式：1. exec 格式（&lt;code&gt;ENTRYPOINT [&amp;quot;&amp;lt;可执行文件&amp;gt;&amp;quot;, &amp;quot;1&amp;gt;&amp;quot;, ...]&lt;/code&gt;）：推荐格式，信号可直接传递，容器启动后进程为 PID 1；2. 壳层格式（&lt;code&gt;ENTRYPOINT &amp;gt;&lt;/code&gt;）：通过 shell 执行，进程不会成为 PID 1，可能影响信号处理（如 &lt;code&gt;docker stop&lt;/code&gt; 无法正常终止进程）；一个 Dockerfile 中仅能有一个 &lt;code&gt;ENTRYPOINT&lt;/code&gt; 指令，多个 &lt;code&gt;ENTRYPOINT&lt;/code&gt; 仅最后一个生效；&lt;code&gt;docker run --entrypoint&lt;/code&gt; 命令可覆盖 &lt;code&gt;ENTRYPOINT&lt;/code&gt; 的默认值&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;EXPOSE&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;声明容器运行时对外暴露的端口（仅为文档说明作用，不实际映射端口到主机）；用于告知使用者容器的服务端口，便于 &lt;code&gt;docker run -p&lt;/code&gt; 映射；支持单个端口（&lt;code&gt;EXPOSE 80&lt;/code&gt;）、多个端口（&lt;code&gt;EXPOSE 80 443&lt;/code&gt;）、指定协议（&lt;code&gt;EXPOSE 80/tcp 80/udp&lt;/code&gt;，默认 TCP）；即使不声明 &lt;code&gt;EXPOSE&lt;/code&gt;，&lt;code&gt;docker run -p&lt;/code&gt; 仍可映射端口&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;HEALTHCHECK&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;定义容器健康检查规则，用于判断容器内服务是否正常运行；支持两种格式：1. &lt;code&gt;HEALTHCHECK [选项] CMD （如 &lt;/code&gt;HEALTHCHECK &amp;ndash;interval=30s &amp;ndash;timeout=10s &amp;ndash;retries=3 CMD curl -f &lt;a href=&#34;http://localhost&#34;target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://localhost&lt;/a&gt;&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;七、安全与资源控制模块&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;七安全与资源控制模块&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%b8%83%e5%ae%89%e5%85%a8%e4%b8%8e%e8%b5%84%e6%ba%90%e6%8e%a7%e5%88%b6%e6%a8%a1%e5%9d%97&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;该模块指令用于配置容器运行时的安全策略、资源限制、内核参数，提升容器运行的安全性和稳定性。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;指令&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;SECURITY_OPT&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;设置容器的安全选项，用于限制容器的权限、启用安全机制（如 &lt;code&gt;--security-opt seccomp=profile.json&lt;/code&gt; 启用自定义 seccomp 安全配置，&lt;code&gt;--security-opt apparmor=profile&lt;/code&gt; 启用 AppArmor 配置）；语法：&lt;code&gt;SECURITY_OPT [&amp;quot;&amp;lt;选项1&amp;gt;&amp;quot;, &amp;quot;&amp;gt;&amp;quot;]&lt;/code&gt;；用于增强容器安全性，限制容器对主机的访问权限&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;CAP_ADD&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;为容器添加 Linux 内核能力（Capabilities），默认容器仅拥有部分基础能力；常见能力：&lt;code&gt;NET_ADMIN&lt;/code&gt;（网络管理权限）、&lt;code&gt;SYS_TIME&lt;/code&gt;（修改系统时间权限）、&lt;code&gt;DAC_READ_SEARCH&lt;/code&gt;（读取任意文件权限）；语法：&lt;code&gt;CAP_ADD [&amp;quot;&amp;lt;能力1&amp;gt;&amp;quot;, &amp;quot;2&amp;gt;&amp;quot;]&lt;/code&gt;（如 &lt;code&gt;CAP_ADD [&amp;quot;NET_ADMIN&amp;quot;]&lt;/code&gt;）；仅授予必要能力，避免过度授权&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;CAP_DROP&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;从容器中移除 Linux 内核能力，与 &lt;code&gt;CAP_ADD&lt;/code&gt; 配合使用，最小化容器权限；支持 &lt;code&gt;CAP_DROP ALL&lt;/code&gt;（移除所有能力，仅保留默认最小能力集）；语法：&lt;code&gt;CAP_DROP [&amp;quot;&amp;lt;能力1&amp;gt;&amp;quot;, &amp;quot;&amp;lt;能力2&amp;gt;&amp;quot;]&lt;/code&gt;（如 &lt;code&gt;CAP_DROP [&amp;quot;SETUID&amp;quot;, &amp;quot;SETGID&amp;quot;]&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;SYSCTL&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;配置容器运行时的内核参数（仅在 Linux 镜像中生效），用于优化容器网络、内存等性能；语法：&lt;code&gt;SYSCTL [&amp;quot;&amp;lt;参数1&amp;gt;=&amp;gt;&amp;quot;, &amp;quot;&amp;lt;参数2&amp;gt;=&amp;lt;值2&amp;gt;&amp;quot;]&lt;/code&gt;（如 &lt;code&gt;SYSCTL [&amp;quot;net.ipv4.ip_forward=1&amp;quot;, &amp;quot;net.core.somaxconn=1024&amp;quot;]&lt;/code&gt;）；需确保内核参数支持容器级配置，部分参数需主机内核开启相关功能&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;USER --root&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;扩展 &lt;code&gt;USER&lt;/code&gt; 指令，强制以 root 用户执行后续指令（如 &lt;code&gt;USER --root RUN apt update&lt;/code&gt;），用于需要临时提升权限的场景，执行完成后可切换回普通用户，平衡安全性和操作便利性&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;八、多阶段构建专用模块&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;八多阶段构建专用模块&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e5%85%ab%e5%a4%9a%e9%98%b6%e6%ae%b5%e6%9e%84%e5%bb%ba%e4%b8%93%e7%94%a8%e6%a8%a1%e5%9d%97&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;该模块指令仅用于多阶段构建，实现构建过程与运行环境分离，减小最终镜像体积。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;指令&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;COPY --from&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;多阶段构建专用，从之前命名的构建阶段复制文件到当前阶段（如 &lt;code&gt;COPY --from=builder /app/bin/app /usr/local/bin/&lt;/code&gt;）；&lt;code&gt;builder&lt;/code&gt; 为前一阶段的 &lt;code&gt;FROM AS  定义的名称；支持从外部镜像复制文件（如 &lt;/code&gt;COPY &amp;ndash;from=nginx:alpine /etc/nginx/nginx.conf/app/`）；核心作用是仅保留运行时必需的文件（如编译后的程序），丢弃构建时的依赖（如编译器、源代码），大幅减小镜像体积&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;FROM --from&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;多阶段构建专用，指定当前阶段的基础镜像为前一构建阶段（如 &lt;code&gt;FROM --from=builder alpine:3.18&lt;/code&gt;），用于基于前一阶段的构建结果继续构建，适用于复杂的分层构建场景&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;九、示例&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;九示例&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%b9%9d%e7%a4%ba%e4%be%8b&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div class=&#34;hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code&#34;&gt;

&lt;div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-dockerfile&#34; data-lang=&#34;dockerfile&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# ===================== 第一阶段：构建阶段（多阶段构建核心）=====================&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 指定构建基础镜像，带版本锁定+镜像别名，适配多阶段复用&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; maven:3.9.6-openjdk-17-slim AS builder&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 设置构建阶段的工作目录（核心指令，统一后续操作路径）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WORKDIR&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; /app/build&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 声明元数据：镜像作者（Name &amp;lt;Email&amp;gt; 规范格式）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;LABEL&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;maintainer&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;DevOps-Team &amp;lt;devops@company.com&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 声明元数据：镜像描述、版本、应用类型（标准化镜像标识）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;LABEL&lt;/span&gt; org.opencontainers.image.title&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Java-Backend-Service&amp;#34;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;LABEL&lt;/span&gt; org.opencontainers.image.description&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Production-grade Java microservice with full optimizations&amp;#34;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;LABEL&lt;/span&gt; org.opencontainers.image.version&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;v2.1.0&amp;#34;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;LABEL&lt;/span&gt; org.opencontainers.image.authors&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;devops-team&amp;#34;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 声明元数据：镜像开源协议、仓库地址&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;LABEL&lt;/span&gt; org.opencontainers.image.licenses&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;MIT&amp;#34;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;LABEL&lt;/span&gt; org.opencontainers.image.source&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;https://github.com/xxx/java-service&amp;#34;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 1. COPY 指令多参数演示：--chown（指定文件属主）、通配符、多源复制&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 复制Maven配置文件（优先下载依赖，利用Docker分层缓存，提升构建效率）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;COPY&lt;/span&gt; --chown&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1000:1000 pom.xml ./&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;COPY&lt;/span&gt; --chown&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1000:1000 settings.xml /usr/share/maven/conf/&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 2. RUN 指令多参数演示：\换行拼接、&amp;amp;&amp;amp; 链式执行、管道符、apt包管理全参数&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 安装构建依赖+清理缓存，减少镜像体积；指定DEBIAN_FRONTEND避免交互&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;RUN&lt;/span&gt; apt-get update &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;DEBIAN_FRONTEND&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;noninteractive apt-get install -y --no-install-recommends git curl wget &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get clean &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 下载Maven依赖（分层缓存核心：依赖不变则该层不重建）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;RUN&lt;/span&gt; mvn dependency:go-offline -B&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 复制项目源码（源码变动仅重建该层及后续层）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;COPY&lt;/span&gt; --chown&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1000:1000 src/ ./src/&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 打包项目：跳过测试、指定编码、输出可执行Jar包&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;RUN&lt;/span&gt; mvn clean package -DskipTests -Dfile.encoding&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;UTF-8 -Dmaven.compiler.source&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;17&lt;/span&gt; -Dmaven.compiler.target&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;17&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ===================== 第二阶段：运行阶段（精简镜像，生产环境规范）=====================&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 选型轻量级基础镜像（Alpine版，体积仅几十MB，比slim更精简），指定具体版本避免漂移&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;FROM&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; openjdk:17-jdk-alpine3.19 AS production&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 设置时区（解决容器内时区与宿主机不一致问题，生产必配）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ENV&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;TZ&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;Asia/Shanghai&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 3. ENV 指令多参数演示：批量设置环境变量（应用配置、JVM调优、路径配置）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 应用核心配置&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ENV&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;APP_NAME&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;java-service &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;APP_PORT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;SPRING_PROFILES_ACTIVE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;prod &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;# JVM性能调优参数（生产级，适配容器内存限制）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;JAVA_OPTS&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;-Xms512m -Xmx1024m -XX:+UseContainerSupport -XX:MaxRAMPercentage=80.0&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;c1&#34;&gt;# 应用工作路径&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;nv&#34;&gt;APP_HOME&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;/app/runtime&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 4. ARG 指令演示：构建时参数（仅构建阶段生效，可通过 docker build --build-arg 传参）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 定义运行时用户ID/组ID，支持构建时自定义&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ARG&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;RUN_USER&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;appuser
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;ARG&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;RUN_UID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;ARG&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;RUN_GID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# 创建非root用户+组（生产安全规范：禁止容器以root运行，降低权限风险）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;RUN&lt;/span&gt; addgroup --gid &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;RUN_GID&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;RUN_USER&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; adduser --uid &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;RUN_UID&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; --gid &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;RUN_GID&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; --disabled-password --gecos &lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt; &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;RUN_USER&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 创建应用工作目录+授权（指定属主，避免权限问题）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;RUN&lt;/span&gt; mkdir -p &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;APP_HOME&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;/logs &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;APP_HOME&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;/conf &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; chown -R &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;RUN_USER&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;:&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;RUN_USER&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;APP_HOME&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 切换工作目录（后续指令默认在此路径执行）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;WORKDIR&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; ${APP_HOME}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 5. COPY --from 多阶段复制核心：从builder阶段复制打包产物，仅保留运行必需文件&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;COPY&lt;/span&gt; --from&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;builder --chown&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;RUN_USER&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;:&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;RUN_USER&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; /app/build/target/*.jar &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;APP_HOME&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;/app.jar&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 6. USER 指令：切换为非root用户（生产必配，完成权限降级）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;USER&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; ${RUN_USER}&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 7. EXPOSE 指令：声明容器对外暴露的端口（TCP协议，生产规范：仅声明，不映射）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 支持多端口声明，区分应用端口、监控端口&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;EXPOSE&lt;/span&gt;&lt;span class=&#34;s&#34;&gt; ${APP_PORT}/tcp 9100/tcp&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 8. VOLUME 指令：声明持久化数据卷（日志、配置、数据，实现容器数据与容器解耦）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 容器销毁后，卷内数据可保留，支持宿主机挂载/容器间共享&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;VOLUME&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;${APP_HOME}/logs&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;${APP_HOME}/conf&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;/tmp&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 9. HEALTHCHECK 健康检查指令（生产必配，Docker容器自愈核心）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# --interval：检查间隔（30秒）、--timeout：超时时间（5秒）、--retries：重试次数（3次）、--start-period：启动等待时间（60秒）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 检查逻辑：通过curl访问健康接口，返回200则健康，否则不健康&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;HEALTHCHECK --interval=30s --timeout=5s --retries=3 &lt;/span&gt;--start-period&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;60s &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    CMD curl -f http://localhost:&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;APP_PORT&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;/actuator/health &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;exit&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 10. ENTRYPOINT + CMD 组合（生产最优解：ENTRYPOINT固定执行逻辑，CMD传默认参数）&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ENTRYPOINT：不可被docker run命令行参数覆盖，保证启动脚本固定&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# CMD：可被docker run参数覆盖，支持启动参数自定义&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;ENTRYPOINT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;java&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-jar&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;CMD&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;app.jar&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0&#34;&gt;
  &lt;button
    class=&#34;hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50&#34;
    title=&#34;复制代码&#34;
  &gt;
    &lt;div class=&#34;hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
&lt;div class=&#34;hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
  &lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;h2&gt;补充说明&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;补充说明&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e8%a1%a5%e5%85%85%e8%af%b4%e6%98%8e&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;指令执行顺序&lt;/strong&gt;：Dockerfile 指令按从上到下的顺序执行，&lt;code&gt;FROM&lt;/code&gt; 指令必须是第一个非注释指令；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;镜像层优化&lt;/strong&gt;：&lt;code&gt;RUN&lt;/code&gt;、&lt;code&gt;COPY&lt;/code&gt;、&lt;code&gt;ADD&lt;/code&gt; 指令会创建新的镜像层，层数越多镜像体积越大，建议合并相关 &lt;code&gt;RUN&lt;/code&gt; 指令，避免无用文件复制；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;注释语法&lt;/strong&gt;：使用 &lt;code&gt;#&lt;/code&gt; 开头表示注释（如 &lt;code&gt;# 安装 Nginx&lt;/code&gt;），注释仅用于说明，不会被执行；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;官方文档参考&lt;/strong&gt;：所有指令的最新说明可查阅 Docker 官方文档：&lt;a href=&#34;https://docs.docker.com/engine/reference/builder/&#34;target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Dockerfile Reference&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;

      </description>
    </item>
    
    <item>
      <title>Docker Compose基础</title>
      <link>http://localhost:8081/docs/docker/docker-compose%E5%9F%BA%E7%A1%80/</link>
      <pubDate>Fri, 26 Dec 2025 16:38:27 +0800</pubDate>
      
      <guid>http://localhost:8081/docs/docker/docker-compose%E5%9F%BA%E7%A1%80/</guid>
      <description>
        
        
        &lt;h2&gt;一、Docker Compose 配置文件核心结构&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;一docker-compose-配置文件核心结构&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%b8%80docker-compose-%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e6%a0%b8%e5%bf%83%e7%bb%93%e6%9e%84&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;Docker Compose 配置文件（&lt;code&gt;docker-compose.yml&lt;/code&gt;/&lt;code&gt;compose.yml&lt;/code&gt;）基于 YAML 格式，核心分为 &lt;strong&gt;五大模块&lt;/strong&gt;：&lt;code&gt;services&lt;/code&gt;（服务，必选）、&lt;code&gt;networks&lt;/code&gt;（网络）、&lt;code&gt;volumes&lt;/code&gt;（卷）、&lt;code&gt;configs&lt;/code&gt;（配置）、&lt;code&gt;secrets&lt;/code&gt;（密钥），另支持顶层全局参数和自定义扩展字段，以下是所有支持的参数详细说明。&lt;/p&gt;
&lt;h2&gt;二、顶层全局参数&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;二顶层全局参数&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%ba%8c%e9%a1%b6%e5%b1%82%e5%85%a8%e5%b1%80%e5%8f%82%e6%95%b0&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;顶层参数作用于整个 Compose 项目，定义项目的基础配置和全局资源。&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;version&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;指定 Compose 文件格式版本（推荐 &lt;code&gt;3.8+&lt;/code&gt;，适配 Docker 20.10+），不同版本支持的参数存在兼容性差异，&lt;code&gt;3.x&lt;/code&gt; 版本适配 Swarm 模式，&lt;code&gt;2.x&lt;/code&gt; 偏向单机使用&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;services&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;定义所有容器服务（核心必选模块），下属每个子项为一个独立容器服务，包含容器运行的所有配置&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;networks&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;定义自定义网络，用于服务间网络隔离、通信，支持多种网络驱动，需在服务中通过 &lt;code&gt;networks&lt;/code&gt; 关联&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;volumes&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;定义持久化数据卷，用于容器数据持久化（容器删除后数据不丢失），支持本地卷、网络卷等，需在服务中通过 &lt;code&gt;volumes&lt;/code&gt; 挂载&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;configs&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Docker Swarm 模式专用，定义跨服务共享的配置文件（非敏感信息），支持本地文件加载或引用外部配置&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;secrets&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Docker Swarm 模式专用，定义敏感信息（密码、密钥等），避免明文暴露，支持本地文件加载或引用外部密钥&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;x-*&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;自定义扩展字段，字段名必须以 &lt;code&gt;x-&lt;/code&gt; 开头（如 &lt;code&gt;x-common-env&lt;/code&gt;），Compose 会忽略该字段，但可通过 YAML 锚点语法复用配置&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;三、Services 模块（容器服务核心参数）&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;三services-模块容器服务核心参数&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%b8%89services-%e6%a8%a1%e5%9d%97%e5%ae%b9%e5%99%a8%e6%9c%8d%e5%8a%a1%e6%a0%b8%e5%bf%83%e5%8f%82%e6%95%b0&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;services&lt;/code&gt; 是 Compose 配置的核心模块，每个服务对应一个容器实例，参数覆盖容器运行的所有配置（等价于 &lt;code&gt;docker run&lt;/code&gt; 命令的所有选项）。&lt;/p&gt;
&lt;h3&gt;1. 基础配置参数&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;1-基础配置参数&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#1-%e5%9f%ba%e7%a1%80%e9%85%8d%e7%bd%ae%e5%8f%82%e6%95%b0&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;image&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;指定容器镜像（格式：&lt;code&gt;镜像名:标签&lt;/code&gt;），与 &lt;code&gt;build&lt;/code&gt; 二选一，优先使用已有镜像&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;build&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;从 Dockerfile 构建镜像，不使用现有镜像，支持子参数：&lt;code&gt;context&lt;/code&gt;（构建上下文目录，必选）、&lt;code&gt;dockerfile&lt;/code&gt;（自定义 Dockerfile 文件名）、&lt;code&gt;args&lt;/code&gt;（构建参数，对应 Dockerfile 的 &lt;code&gt;ARG&lt;/code&gt;）、&lt;code&gt;labels&lt;/code&gt;（构建时添加镜像标签）、&lt;code&gt;cache_from&lt;/code&gt;（构建缓存来源）、&lt;code&gt;cache_to&lt;/code&gt;（构建缓存推送目标）、&lt;code&gt;shm_size&lt;/code&gt;（共享内存大小）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;container_name&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;自定义容器名称，默认自动生成（格式：&lt;code&gt;项目名_服务名_序号&lt;/code&gt;），同一主机内容器名称唯一&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;command&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;覆盖容器默认启动命令，支持字符串格式（如 &lt;code&gt;nginx -g &#39;daemon off;&#39;&lt;/code&gt;）或数组格式（如 &lt;code&gt;[&amp;quot;nginx&amp;quot;, &amp;quot;-g&amp;quot;, &amp;quot;daemon off;&amp;quot;]&lt;/code&gt;），数组格式更安全（避免字符转义问题）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;entrypoint&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;覆盖容器默认入口点，优先级高于 &lt;code&gt;command&lt;/code&gt;，支持字符串或数组格式，入口点是容器启动时执行的第一个命令&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;restart&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器重启策略：&lt;code&gt;no&lt;/code&gt;（默认，不重启）、&lt;code&gt;always&lt;/code&gt;（容器退出时始终重启）、&lt;code&gt;on-failure&lt;/code&gt;（容器退出状态码非 0 时重启）、&lt;code&gt;unless-stopped&lt;/code&gt;（除非手动停止容器，否则始终重启）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;hostname&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器主机名，在容器内部可见，用于容器内程序识别主机标识&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;domainname&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器域名，配合 &lt;code&gt;hostname&lt;/code&gt; 使用，组成完整的主机域名（如 &lt;code&gt;hostname: app&lt;/code&gt; + &lt;code&gt;domainname: example.com&lt;/code&gt; → &lt;code&gt;app.example.com&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;mac_address&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器 MAC 地址（如 &lt;code&gt;02:42:ac:11:65:43&lt;/code&gt;），用于需要绑定 MAC 地址的场景&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;privileged&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;是否授予容器特权模式（&lt;code&gt;true&lt;/code&gt;/&lt;code&gt;false&lt;/code&gt;），特权模式下容器拥有主机的所有设备访问权限&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;read_only&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器文件系统是否设为只读（&lt;code&gt;true&lt;/code&gt;/&lt;code&gt;false&lt;/code&gt;），只读模式下容器无法修改文件系统，需通过卷挂载可写目录&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;stdin_open&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;是否保持标准输入打开（&lt;code&gt;true&lt;/code&gt;/&lt;code&gt;false&lt;/code&gt;），等价于 &lt;code&gt;docker run -i&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;tty&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;是否分配伪终端（&lt;code&gt;true&lt;/code&gt;/&lt;code&gt;false&lt;/code&gt;），等价于 &lt;code&gt;docker run -t&lt;/code&gt;，通常与 &lt;code&gt;stdin_open&lt;/code&gt; 配合使用（&lt;code&gt;stdin_open: true&lt;/code&gt; + &lt;code&gt;tty: true&lt;/code&gt; → 等价于 &lt;code&gt;docker run -it&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;stop_signal&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;停止容器的信号（默认 &lt;code&gt;SIGTERM&lt;/code&gt;），支持 Unix 信号（如 &lt;code&gt;SIGINT&lt;/code&gt;、&lt;code&gt;SIGKILL&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;stop_grace_period&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器停止的宽限期（默认 &lt;code&gt;10s&lt;/code&gt;），宽限期内容器正常退出，超时后强制终止（&lt;code&gt;SIGKILL&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;healthcheck&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器健康检查配置，子参数：&lt;code&gt;test&lt;/code&gt;（健康检查命令，如 &lt;code&gt;[&amp;quot;CMD&amp;quot;, &amp;quot;curl&amp;quot;, &amp;quot;-f&amp;quot;, &amp;quot;http://localhost&amp;quot;]&lt;/code&gt;）、&lt;code&gt;interval&lt;/code&gt;（检查间隔，如 &lt;code&gt;30s&lt;/code&gt;）、&lt;code&gt;timeout&lt;/code&gt;（检查超时时间，如 &lt;code&gt;10s&lt;/code&gt;）、&lt;code&gt;retries&lt;/code&gt;（检查失败重试次数，如 &lt;code&gt;3&lt;/code&gt;）、&lt;code&gt;start_period&lt;/code&gt;（容器启动后延迟检查的时间，如 &lt;code&gt;30s&lt;/code&gt;）、&lt;code&gt;disable&lt;/code&gt;（是否禁用健康检查，&lt;code&gt;true&lt;/code&gt;/&lt;code&gt;false&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;depends_on&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;服务依赖关系，控制服务启动 / 停止顺序（启动时先启动依赖服务，停止时后停止当前服务），支持数组格式（如 &lt;code&gt;[&amp;quot;db&amp;quot;, &amp;quot;redis&amp;quot;]&lt;/code&gt;），仅保证启动顺序，不保证依赖服务就绪（需结合健康检查）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;deploy&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;部署配置（Swarm 模式核心参数，单机模式部分生效），子参数：&lt;code&gt;replicas&lt;/code&gt;（Swarm 模式下的副本数）、&lt;code&gt;resources&lt;/code&gt;（资源限制与预留）、&lt;code&gt;restart_policy&lt;/code&gt;（Swarm 模式重启策略）、&lt;code&gt;placement&lt;/code&gt;（节点部署约束）、&lt;code&gt;update_config&lt;/code&gt;（滚动更新配置）、&lt;code&gt;rollback_config&lt;/code&gt;（回滚配置）、&lt;code&gt;labels&lt;/code&gt;（服务部署标签）、&lt;code&gt;mode&lt;/code&gt;（部署模式：&lt;code&gt;replicated&lt;/code&gt; 副本模式 /&lt;code&gt;global&lt;/code&gt; 全局模式）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;labels&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器元数据标签，用于分类、筛选容器，支持键值对格式（如 &lt;code&gt;com.example.env: production&lt;/code&gt;）或数组格式（如 &lt;code&gt;[&amp;quot;com.example.team=devops&amp;quot;, &amp;quot;com.example.version=1.0&amp;quot;]&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;2. 网络配置参数&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;2-网络配置参数&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#2-%e7%bd%91%e7%bb%9c%e9%85%8d%e7%bd%ae%e5%8f%82%e6%95%b0&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;networks&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器关联的自定义网络，需在顶层 &lt;code&gt;networks&lt;/code&gt; 中定义，支持子参数：&lt;code&gt;aliases&lt;/code&gt;（容器在该网络中的别名，服务间可通过别名访问）、&lt;code&gt;ipv4_address&lt;/code&gt;（静态 IPv4 地址，需网络支持固定子网）、&lt;code&gt;ipv6_address&lt;/code&gt;（静态 IPv6 地址）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;ports&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;端口映射，将容器端口暴露到主机，支持短格式（&lt;code&gt;主机端口:容器端口&lt;/code&gt;，如 &lt;code&gt;8080:80&lt;/code&gt;）、长格式（&lt;code&gt;published&lt;/code&gt; 主机端口、&lt;code&gt;target&lt;/code&gt; 容器端口、&lt;code&gt;protocol&lt;/code&gt; 协议（&lt;code&gt;tcp&lt;/code&gt;/&lt;code&gt;udp&lt;/code&gt;/&lt;code&gt;sctp&lt;/code&gt;）、&lt;code&gt;mode&lt;/code&gt; 模式（&lt;code&gt;host&lt;/code&gt;/&lt;code&gt;ingress&lt;/code&gt;，Swarm 模式有效））&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;expose&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;暴露容器内部端口（仅声明端口，不映射到主机），供同一网络内的其他服务访问，支持单个端口（如 &lt;code&gt;8080&lt;/code&gt;）或数组格式（如 &lt;code&gt;[&amp;quot;8080&amp;quot;, &amp;quot;9090&amp;quot;]&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;dns&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;自定义容器 DNS 服务器，支持单个 DNS（如 &lt;code&gt;8.8.8.8&lt;/code&gt;）或数组格式（如 &lt;code&gt;[&amp;quot;8.8.8.8&amp;quot;, &amp;quot;114.114.114.114&amp;quot;]&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;dns_search&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;DNS 搜索域，容器解析主机名时自动拼接的域名后缀（如 &lt;code&gt;[&amp;quot;example.com&amp;quot;, &amp;quot;test.com&amp;quot;]&lt;/code&gt;），解析 &lt;code&gt;app&lt;/code&gt; 时会尝试 &lt;code&gt;app.example.com&lt;/code&gt;、&lt;code&gt;app.test.com&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;dns_opt&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;DNS 选项，如 &lt;code&gt;[&amp;quot;use-vc&amp;quot;, &amp;quot;timeout:2&amp;quot;]&lt;/code&gt;（使用 TCP 连接 DNS 服务器、超时时间 2 秒）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;network_mode&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器网络模式，可选值：&lt;code&gt;bridge&lt;/code&gt;（默认，桥接模式）、&lt;code&gt;host&lt;/code&gt;（共享主机网络栈）、&lt;code&gt;none&lt;/code&gt;（无网络）、&lt;code&gt;service:&amp;gt;&lt;/code&gt;（共享其他服务的网络栈）、&lt;code&gt;container:&amp;gt;&lt;/code&gt;（共享其他容器的网络栈）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;extra_hosts&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;添加主机名到 IP 的映射（等价于 &lt;code&gt;docker run --add-host&lt;/code&gt;），支持数组格式（如 &lt;code&gt;[&amp;quot;host.docker.internal:host-gateway&amp;quot;, &amp;quot;db-server:192.168.1.100&amp;quot;]&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;hostname&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器主机名（已在基础配置中列出，此处重复标注网络相关作用）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;domainname&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器域名（已在基础配置中列出，此处重复标注网络相关作用）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;mac_address&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器 MAC 地址（已在基础配置中列出，此处重复标注网络相关作用）&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;3. 存储配置参数&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;3-存储配置参数&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#3-%e5%ad%98%e5%82%a8%e9%85%8d%e7%bd%ae%e5%8f%82%e6%95%b0&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;volumes&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;数据卷挂载，支持三种类型：&lt;code&gt;bind&lt;/code&gt;（主机路径绑定）、&lt;code&gt;volume&lt;/code&gt;（命名卷，需在顶层 &lt;code&gt;volumes&lt;/code&gt; 定义）、&lt;code&gt;tmpfs&lt;/code&gt;（临时文件系统），格式：短格式（&lt;code&gt;源:目标:权限&lt;/code&gt;，如 &lt;code&gt;./data:/app/data:ro&lt;/code&gt;）、长格式（&lt;code&gt;type&lt;/code&gt; 类型、&lt;code&gt;source&lt;/code&gt; 源路径、&lt;code&gt;target&lt;/code&gt; 目标路径、&lt;code&gt;read_only&lt;/code&gt; 是否只读、&lt;code&gt;bind&lt;/code&gt; 绑定选项、&lt;code&gt;volume&lt;/code&gt; 卷选项、&lt;code&gt;tmpfs&lt;/code&gt; 临时文件系统选项）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;tmpfs&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;挂载临时文件系统（容器重启后数据丢失），支持单个路径（如 &lt;code&gt;/tmp&lt;/code&gt;）或数组格式（如 &lt;code&gt;[&amp;quot;/tmp&amp;quot;, &amp;quot;/var/run:size=100m&amp;quot;]&lt;/code&gt;），&lt;code&gt;size&lt;/code&gt; 限制临时目录大小&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;ulimits&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器资源限制，控制容器的最大进程数、文件描述符数等，支持子参数：&lt;code&gt;nproc&lt;/code&gt;（最大进程数）、&lt;code&gt;nofile&lt;/code&gt;（最大文件描述符数，支持 &lt;code&gt;soft&lt;/code&gt; 软限制和 &lt;code&gt;hard&lt;/code&gt; 硬限制）、&lt;code&gt;core&lt;/code&gt;（核心文件大小限制）、&lt;code&gt;rss&lt;/code&gt;（常驻内存大小限制）等&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;shm_size&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器共享内存大小（如 &lt;code&gt;1g&lt;/code&gt;、&lt;code&gt;512m&lt;/code&gt;），等价于 &lt;code&gt;docker run --shm-size&lt;/code&gt;&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;sysctls&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;配置容器内核参数（如 &lt;code&gt;net.ipv4.ip_forward: 1&lt;/code&gt;、&lt;code&gt;net.core.somaxconn: 1024&lt;/code&gt;），支持键值对或数组格式&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;cap_add&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;添加容器的 Linux  capabilities（如 &lt;code&gt;NET_ADMIN&lt;/code&gt;、&lt;code&gt;SYS_TIME&lt;/code&gt;），赋予容器额外权限&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;cap_drop&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;移除容器的 Linux  capabilities（如 &lt;code&gt;ALL&lt;/code&gt; 移除所有权限，仅保留默认最小权限）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;devices&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;挂载主机设备到容器（如 &lt;code&gt;/dev/sda1:/dev/sda1&lt;/code&gt;），支持数组格式，需配合 &lt;code&gt;privileged: true&lt;/code&gt; 使用&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;4. 环境配置参数&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;4-环境配置参数&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#4-%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae%e5%8f%82%e6%95%b0&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;environment&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;设置容器环境变量，支持数组格式（如 &lt;code&gt;[&amp;quot;MYSQL_ROOT_PASSWORD=123456&amp;quot;, &amp;quot;APP_ENV=prod&amp;quot;]&lt;/code&gt;）或字典格式（如 &lt;code&gt;MYSQL_ROOT_PASSWORD: 123456&lt;/code&gt;），优先级高于 &lt;code&gt;env_file&lt;/code&gt;，同名变量会覆盖 &lt;code&gt;env_file&lt;/code&gt; 中的值&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;env_file&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;从文件加载环境变量，支持单个文件（如 &lt;code&gt;.env&lt;/code&gt;）或数组格式（如 &lt;code&gt;[&amp;quot;.env&amp;quot;, &amp;quot;prod.env&amp;quot;]&lt;/code&gt;），文件中每行格式为 &lt;code&gt;KEY=VALUE&lt;/code&gt;，空行和 &lt;code&gt;#&lt;/code&gt; 开头的注释行会被忽略&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;secrets&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Docker Swarm 模式下挂载密钥，从顶层 &lt;code&gt;secrets&lt;/code&gt; 中引用，支持子参数：&lt;code&gt;source&lt;/code&gt;（密钥名称）、&lt;code&gt;target&lt;/code&gt;（容器内挂载路径）、&lt;code&gt;uid&lt;/code&gt;（挂载文件的用户 ID）、&lt;code&gt;gid&lt;/code&gt;（挂载文件的组 ID）、&lt;code&gt;mode&lt;/code&gt;（挂载文件的权限，如 &lt;code&gt;0400&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;configs&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Docker Swarm 模式下挂载配置文件，从顶层 &lt;code&gt;configs&lt;/code&gt; 中引用，子参数与 &lt;code&gt;secrets&lt;/code&gt; 一致，用于挂载非敏感配置&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;user&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器运行用户，支持用户名（如 &lt;code&gt;root&lt;/code&gt;）、UID（如 &lt;code&gt;1000&lt;/code&gt;）、UID:GID（如 &lt;code&gt;1000:1000&lt;/code&gt;），用于控制容器内程序的运行权限&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;working_dir&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器工作目录（如 &lt;code&gt;/app&lt;/code&gt;），容器启动后默认进入该目录，&lt;code&gt;command&lt;/code&gt; 和 &lt;code&gt;entrypoint&lt;/code&gt; 命令会在该目录下执行&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;env_file&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;从文件加载环境变量（已说明，此处保持分类一致性）&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;5. 资源限制与部署参数（补充 &lt;code&gt;deploy&lt;/code&gt; 子参数）&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;5-资源限制与部署参数补充-deploy-子参数&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#5-%e8%b5%84%e6%ba%90%e9%99%90%e5%88%b6%e4%b8%8e%e9%83%a8%e7%bd%b2%e5%8f%82%e6%95%b0%e8%a1%a5%e5%85%85-deploy-%e5%ad%90%e5%8f%82%e6%95%b0&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;cpus&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;简化的 CPU 限制（如 &lt;code&gt;0.5&lt;/code&gt;、&lt;code&gt;2&lt;/code&gt;），等价于 &lt;code&gt;deploy.resources.limits.cpus&lt;/code&gt;，单机模式生效&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;cpus_per_task&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Swarm 模式下每个任务（容器）的 CPU 限制，仅 &lt;code&gt;mode: replicated&lt;/code&gt; 有效&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;mem_limit&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;简化的内存限制（如 &lt;code&gt;1g&lt;/code&gt;、&lt;code&gt;512m&lt;/code&gt;），等价于 &lt;code&gt;deploy.resources.limits.memory&lt;/code&gt;，单机模式生效&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;mem_reservation&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;简化的内存预留（如 &lt;code&gt;512m&lt;/code&gt;），等价于 &lt;code&gt;deploy.resources.reservations.memory&lt;/code&gt;，保证容器最小可用内存&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;deploy.resources.limits&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器最大资源限制，子参数：&lt;code&gt;cpus&lt;/code&gt;（CPU 核心数，如 &lt;code&gt;1&lt;/code&gt; 表示 1 核）、&lt;code&gt;memory&lt;/code&gt;（内存大小，如 &lt;code&gt;1g&lt;/code&gt;）、&lt;code&gt;pids&lt;/code&gt;（最大进程数，如 &lt;code&gt;50&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;deploy.resources.reservations&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器最小资源预留，子参数与 &lt;code&gt;limits&lt;/code&gt; 一致，确保节点为容器分配足够资源&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;deploy.restart_policy&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Swarm 模式重启策略，子参数：&lt;code&gt;condition&lt;/code&gt;（重启条件：&lt;code&gt;none&lt;/code&gt;/&lt;code&gt;on-failure&lt;/code&gt;/&lt;code&gt;any&lt;/code&gt;）、&lt;code&gt;delay&lt;/code&gt;（重启延迟，如 &lt;code&gt;5s&lt;/code&gt;）、&lt;code&gt;max_attempts&lt;/code&gt;（最大重启次数，如 &lt;code&gt;3&lt;/code&gt;）、&lt;code&gt;window&lt;/code&gt;（判断容器稳定的时间窗口，如 &lt;code&gt;120s&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;deploy.placement&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Swarm 节点部署约束，子参数：&lt;code&gt;constraints&lt;/code&gt;（节点约束，如 &lt;code&gt;[&amp;quot;node.role==worker&amp;quot;, &amp;quot;node.labels.env==prod&amp;quot;]&lt;/code&gt;）、&lt;code&gt;preferences&lt;/code&gt;（部署偏好，如 &lt;code&gt;[{&amp;quot;spread&amp;quot;: &amp;quot;node.labels.zone&amp;quot;}]&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;deploy.update_config&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Swarm 滚动更新配置，子参数：&lt;code&gt;parallelism&lt;/code&gt;（同时更新的副本数，如 &lt;code&gt;1&lt;/code&gt;）、&lt;code&gt;delay&lt;/code&gt;（副本更新间隔，如 &lt;code&gt;10s&lt;/code&gt;）、&lt;code&gt;failure_action&lt;/code&gt;（更新失败动作：&lt;code&gt;continue&lt;/code&gt;/&lt;code&gt;rollback&lt;/code&gt;/&lt;code&gt;pause&lt;/code&gt;）、&lt;code&gt;monitor&lt;/code&gt;（更新后监控时间，如 &lt;code&gt;60s&lt;/code&gt;）、&lt;code&gt;max_failure_ratio&lt;/code&gt;（最大失败比例，如 &lt;code&gt;0.2&lt;/code&gt;）、&lt;code&gt;order&lt;/code&gt;（更新顺序：&lt;code&gt;stop-first&lt;/code&gt;/&lt;code&gt;start-first&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;deploy.rollback_config&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Swarm 更新失败回滚配置，子参数与 &lt;code&gt;update_config&lt;/code&gt; 一致&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;deploy.mode&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Swarm 部署模式：&lt;code&gt;replicated&lt;/code&gt;（副本模式，需指定 &lt;code&gt;replicas&lt;/code&gt;）、&lt;code&gt;global&lt;/code&gt;（全局模式，每个节点运行一个副本）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;deploy.replicas&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Swarm 副本模式下的容器数量（如 &lt;code&gt;3&lt;/code&gt;），仅 &lt;code&gt;mode: replicated&lt;/code&gt; 有效&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;deploy.labels&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Swarm 服务部署标签，仅作用于服务，不作用于容器&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3&gt;6. 日志配置参数&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;6-日志配置参数&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#6-%e6%97%a5%e5%bf%97%e9%85%8d%e7%bd%ae%e5%8f%82%e6%95%b0&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h3&gt;&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;logging&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;容器日志配置，子参数：&lt;code&gt;driver&lt;/code&gt;（日志驱动，默认 &lt;code&gt;json-file&lt;/code&gt;，支持 &lt;code&gt;syslog&lt;/code&gt;、&lt;code&gt;journald&lt;/code&gt;、&lt;code&gt;fluentd&lt;/code&gt;、&lt;code&gt;gelf&lt;/code&gt;、&lt;code&gt;none&lt;/code&gt; 等）、&lt;code&gt;options&lt;/code&gt;（驱动选项，如 &lt;code&gt;json-file&lt;/code&gt; 的 &lt;code&gt;max-size&lt;/code&gt;（单个日志文件大小）、&lt;code&gt;max-file&lt;/code&gt;（日志文件保留数量）、&lt;code&gt;compress&lt;/code&gt;（是否压缩旧日志））&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;四、Networks 模块（自定义网络参数）&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;四networks-模块自定义网络参数&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e5%9b%9bnetworks-%e6%a8%a1%e5%9d%97%e8%87%aa%e5%ae%9a%e4%b9%89%e7%bd%91%e7%bb%9c%e5%8f%82%e6%95%b0&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;networks&lt;/code&gt; 模块定义项目的自定义网络，用于服务间通信隔离，支持多种网络驱动，所有参数如下：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;driver&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;网络驱动，可选值：&lt;code&gt;bridge&lt;/code&gt;（单机默认桥接网络）、&lt;code&gt;host&lt;/code&gt;（共享主机网络）、&lt;code&gt;overlay&lt;/code&gt;（Swarm 跨节点网络）、&lt;code&gt;macvlan&lt;/code&gt;（分配物理 MAC 地址，模拟物理设备）、&lt;code&gt;none&lt;/code&gt;（无网络）、&lt;code&gt;ipvlan&lt;/code&gt;（L2/L3 层 VLAN 网络）、第三方驱动（如 &lt;code&gt;weave&lt;/code&gt;、&lt;code&gt;calico&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;driver_opts&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;网络驱动选项，不同驱动支持不同选项，如 &lt;code&gt;bridge&lt;/code&gt; 驱动的 &lt;code&gt;com.docker.network.bridge.name&lt;/code&gt;（自定义桥接网卡名称）、&lt;code&gt;overlay&lt;/code&gt; 驱动的 &lt;code&gt;com.docker.network.driver.mtu&lt;/code&gt;（MTU 大小）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;ipam&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;IP 地址管理配置，子参数：&lt;code&gt;driver&lt;/code&gt;（IPAM 驱动，默认 &lt;code&gt;default&lt;/code&gt;）、&lt;code&gt;config&lt;/code&gt;（IP 配置列表，每个配置包含 &lt;code&gt;subnet&lt;/code&gt;（子网）、&lt;code&gt;gateway&lt;/code&gt;（网关）、&lt;code&gt;ip_range&lt;/code&gt;（可用 IP 范围）、&lt;code&gt;aux_addresses&lt;/code&gt;（预留 IP 地址））、&lt;code&gt;options&lt;/code&gt;（IPAM 选项）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;external&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;是否使用外部已存在的网络（&lt;code&gt;true&lt;/code&gt;/&lt;code&gt;false&lt;/code&gt;），&lt;code&gt;true&lt;/code&gt; 时 Compose 不创建网络，直接使用现有网络（需提前通过 &lt;code&gt;docker network create&lt;/code&gt; 创建）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;name&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;自定义网络名称（默认格式：&lt;code&gt;项目名_网络名&lt;/code&gt;），避免默认名称过长或冲突&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;labels&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;网络元数据标签，用于分类、筛选网络&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;internal&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;是否设置为内部网络（&lt;code&gt;true&lt;/code&gt;/&lt;code&gt;false&lt;/code&gt;），内部网络中的服务无法访问外部网络，仅允许内部服务通信&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;attachable&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Swarm &lt;code&gt;overlay&lt;/code&gt; 网络专用，是否允许非 Swarm 服务的容器连接到该网络（&lt;code&gt;true&lt;/code&gt;/&lt;code&gt;false&lt;/code&gt;）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;ingress&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;Swarm 专用，是否设置为入口网络（&lt;code&gt;true&lt;/code&gt;/&lt;code&gt;false&lt;/code&gt;），入口网络用于 Swarm 服务的负载均衡，默认已存在 &lt;code&gt;ingress&lt;/code&gt; 网络&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;enable_ipv6&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;是否启用 IPv6（&lt;code&gt;true&lt;/code&gt;/&lt;code&gt;false&lt;/code&gt;），需配合 &lt;code&gt;ipam.config&lt;/code&gt; 中的 IPv6 子网配置&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;五、Volumes 模块（持久化卷参数）&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;五volumes-模块持久化卷参数&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%ba%94volumes-%e6%a8%a1%e5%9d%97%e6%8c%81%e4%b9%85%e5%8c%96%e5%8d%b7%e5%8f%82%e6%95%b0&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;volumes&lt;/code&gt; 模块定义项目的持久化卷，用于容器数据持久化，所有参数如下：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;driver&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;卷驱动，默认 &lt;code&gt;local&lt;/code&gt;（本地卷），支持第三方驱动（如 &lt;code&gt;nfs&lt;/code&gt;、&lt;code&gt;glusterfs&lt;/code&gt;、&lt;code&gt;ceph&lt;/code&gt;、&lt;code&gt;azure_file&lt;/code&gt; 等）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;driver_opts&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;卷驱动选项，不同驱动支持不同选项，如 &lt;code&gt;nfs&lt;/code&gt; 驱动的 &lt;code&gt;type&lt;/code&gt;（文件系统类型，&lt;code&gt;nfs&lt;/code&gt;）、&lt;code&gt;o&lt;/code&gt;（挂载选项，如 &lt;code&gt;addr=192.168.1.100,rw&lt;/code&gt;）、&lt;code&gt;device&lt;/code&gt;（NFS 服务器共享目录，如 &lt;code&gt;:/data/nfs&lt;/code&gt;）；&lt;code&gt;local&lt;/code&gt; 驱动的 &lt;code&gt;type&lt;/code&gt;（&lt;code&gt;none&lt;/code&gt;/&lt;code&gt;bind&lt;/code&gt;）、&lt;code&gt;o&lt;/code&gt;（挂载选项）、&lt;code&gt;device&lt;/code&gt;（主机路径）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;external&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;是否使用外部已存在的卷（&lt;code&gt;true&lt;/code&gt;/&lt;code&gt;false&lt;/code&gt;），&lt;code&gt;true&lt;/code&gt; 时 Compose 不创建卷，直接使用现有卷（需提前通过 &lt;code&gt;docker volume create&lt;/code&gt; 创建）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;name&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;自定义卷名称（默认格式：&lt;code&gt;项目名_卷名&lt;/code&gt;），避免默认名称冲突&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;labels&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;卷元数据标签，用于分类、筛选卷&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;permissions&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;卷权限配置（部分驱动支持），如 &lt;code&gt;read_only&lt;/code&gt;（只读）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;target&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;卷挂载目标路径（仅在服务 &lt;code&gt;volumes&lt;/code&gt; 中配置，此处为模块级参数说明）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;source&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;卷挂载源路径（仅在服务 &lt;code&gt;volumes&lt;/code&gt; 中配置，此处为模块级参数说明）&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;六、Configs 模块（Swarm 配置文件参数）&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;六configs-模块swarm-配置文件参数&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e5%85%adconfigs-%e6%a8%a1%e5%9d%97swarm-%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%8f%82%e6%95%b0&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;configs&lt;/code&gt; 模块仅在 Docker Swarm 模式下生效，定义跨服务共享的非敏感配置文件，所有参数如下：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;file&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;从本地文件加载配置内容（如 &lt;code&gt;file: ./app.conf&lt;/code&gt;），Compose 启动时将文件内容上传到 Swarm 配置存储&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;external&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;是否使用外部已存在的配置（&lt;code&gt;true&lt;/code&gt;/&lt;code&gt;false&lt;/code&gt;），&lt;code&gt;true&lt;/code&gt; 时引用 Swarm 中已创建的配置（需提前通过 &lt;code&gt;docker config create&lt;/code&gt; 创建）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;name&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;自定义配置名称（默认格式：&lt;code&gt;项目名_配置名&lt;/code&gt;），Swarm 中配置名称唯一&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;template_driver&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;配置模板驱动（如 &lt;code&gt;golang&lt;/code&gt;），支持使用模板动态生成配置文件（需配置文件中包含模板语法）&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;七、Secrets 模块（Swarm 密钥参数）&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;七secrets-模块swarm-密钥参数&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e4%b8%83secrets-%e6%a8%a1%e5%9d%97swarm-%e5%af%86%e9%92%a5%e5%8f%82%e6%95%b0&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;secrets&lt;/code&gt; 模块仅在 Docker Swarm 模式下生效，定义敏感信息（密码、密钥等），所有参数如下：&lt;/p&gt;
&lt;table&gt;
  &lt;thead&gt;
      &lt;tr&gt;
          &lt;th&gt;参数&lt;/th&gt;
          &lt;th&gt;说明&lt;/th&gt;
      &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;file&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;从本地文件加载密钥内容（如 &lt;code&gt;file: ./db-password.txt&lt;/code&gt;），文件内容为敏感信息（无需 &lt;code&gt;KEY=VALUE&lt;/code&gt; 格式），上传到 Swarm 密钥存储时会加密&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;external&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;是否使用外部已存在的密钥（&lt;code&gt;true&lt;/code&gt;/&lt;code&gt;false&lt;/code&gt;），&lt;code&gt;true&lt;/code&gt; 时引用 Swarm 中已创建的密钥（需提前通过 &lt;code&gt;docker secret create&lt;/code&gt; 创建）&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
          &lt;td&gt;&lt;code&gt;name&lt;/code&gt;&lt;/td&gt;
          &lt;td&gt;自定义密钥名称（默认格式：&lt;code&gt;项目名_密钥名&lt;/code&gt;），Swarm 中密钥名称唯一&lt;/td&gt;
      &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;补充说明&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;补充说明&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e8%a1%a5%e5%85%85%e8%af%b4%e6%98%8e&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;版本兼容性&lt;/strong&gt;：部分参数仅支持特定 Compose 版本，如 &lt;code&gt;deploy&lt;/code&gt; 模块的 &lt;code&gt;rollback_config&lt;/code&gt; 需 &lt;code&gt;version: 3.7+&lt;/code&gt;，&lt;code&gt;configs&lt;/code&gt; 和 &lt;code&gt;secrets&lt;/code&gt; 需 &lt;code&gt;version: 3.3+&lt;/code&gt;，建议优先使用 &lt;code&gt;3.8&lt;/code&gt; 版本（最新稳定版）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;参数优先级&lt;/strong&gt;：&lt;code&gt;environment&lt;/code&gt; &amp;gt; &lt;code&gt;env_file&lt;/code&gt; &amp;gt; 镜像默认环境变量；&lt;code&gt;command&lt;/code&gt;/&lt;code&gt;entrypoint&lt;/code&gt; 覆盖镜像默认配置；服务内 &lt;code&gt;networks&lt;/code&gt;/&lt;code&gt;volumes&lt;/code&gt; 引用顶层定义的资源。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;官方文档参考&lt;/strong&gt;：所有参数的最新说明可查阅 Docker 官方文档：&lt;a href=&#34;https://docs.docker.com/compose/compose-file/&#34;target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Compose File Reference&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;八、示例&lt;span class=&#34;hx:absolute hx:-mt-20&#34; id=&#34;八示例&#34;&gt;&lt;/span&gt;
    &lt;a href=&#34;#%e5%85%ab%e7%a4%ba%e4%be%8b&#34; class=&#34;subheading-anchor&#34; aria-label=&#34;Permalink for this section&#34;&gt;&lt;/a&gt;&lt;/h2&gt;&lt;div class=&#34;hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code&#34;&gt;

&lt;div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;3.8&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 自定义网络&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;networks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app-network&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;driver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;bridge&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ipam&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;subnet&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;172.30.0.0&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/16&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gateway&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;172.30.0.1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 持久化卷&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mysql-data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;driver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;local&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;driver_opts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;none&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;o&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;bind&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;device&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;./mysql-data&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 服务定义&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# Web 服务&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;nginx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;nginx:alpine&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;container_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;my-nginx&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;80:80&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;443:443&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;./nginx.conf:/etc/nginx/nginx.conf:ro&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;./html:/usr/share/nginx/html&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;networks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;app-network&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;unless-stopped&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;healthcheck&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;test&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;CMD&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;wget&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;-qO-&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;http://localhost&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;interval&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;30s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;10s&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;retries&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;depends_on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;php&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 数据库服务&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mysql:8.0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;container_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;my-mysql&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;123456&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;MYSQL_DATABASE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;app_db&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;volumes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;mysql-data:/var/lib/mysql&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;networks&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;app-network&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;deploy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;limits&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cpus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;1G&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;reservations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cpus&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;0.5&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;512M&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;restart&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;on&lt;/span&gt;-&lt;span class=&#34;l&#34;&gt;failure:3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 扩展字段（复用配置）&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;x-common-env&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&amp;amp;common-env&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;TZ&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Asia/Shanghai&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;LANG&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;en_US.UTF-8&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0&#34;&gt;
  &lt;button
    class=&#34;hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50&#34;
    title=&#34;复制代码&#34;
  &gt;
    &lt;div class=&#34;hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
&lt;div class=&#34;hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4&#34;&gt;&lt;/div&gt;
  &lt;/button&gt;
&lt;/div&gt;
&lt;/div&gt;

      </description>
    </item>
    
  </channel>
</rss>
