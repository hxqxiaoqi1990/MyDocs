{"/docs/":{"data":{"":"","简介#简介":"涉及的所有部署和配置环境，如果无特殊说明，均在centos7.9 和 rocky9上完成。\nlinux k8s docker 脚本工具 更多"},"title":"文档"},"/docs/%E6%95%B0%E6%8D%AE%E5%BA%93/":{"data":{"":"redis mongo mysql sqlite"},"title":"数据库"},"/docs/%E6%95%B0%E6%8D%AE%E5%BA%93/mongo/mongo%E5%AE%89%E8%A3%85/":{"data":{"":"","启动#启动":"docker compose up -d ​","部署#部署":"docker-compose.yamlcat \u003e docker-compose.yaml \u003c"},"title":"Mongo安装"},"/docs/%E6%95%B0%E6%8D%AE%E5%BA%93/mysql/mysql%E5%AE%89%E8%A3%85/":{"data":{"":"mysql 部署，如果要部署5.7版本，镜像版本改为：mysql:5.7.28即可\ndocker-compose.yamlcat \u003e docker-compose.yaml \u003c","启动#启动":"docker compose up -d ​"},"title":"Mysql安装"},"/docs/%E6%95%B0%E6%8D%AE%E5%BA%93/redis/redis%E5%AE%89%E8%A3%85/":{"data":{"":"","启动#启动":"docker compose up -d ​","部署#部署":"docker-compose.yamlcat \u003e docker-compose.yaml \u003c"},"title":"Redis安装"},"/docs/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/":{"data":{"":"","简介#简介":"介绍一些关于网络和安全的工具和技术。"},"title":"网络安全"},"/docs/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/iptables%E4%B9%8Bnat%E9%85%8D%E7%BD%AE/":{"data":{"":"","1-web-服务映射80-端口#1. Web 服务映射（80 端口）":"# DNAT：外网访问 203.0.113.10:80 → 转发到内网 192.168.1.200:80 iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 80 -j DNAT --to-destination 192.168.1.200:80","1-临时开启重启失效用于测试#1. 临时开启（重启失效，用于测试）":"echo 1 \u003e /proc/sys/net/ipv4/ip_forward","2-ssh-服务映射2222-端口映射到-22-端口#2. SSH 服务映射（2222 端口映射到 22 端口）":"# DNAT：外网访问 203.0.113.10:2222 → 转发到内网 192.168.1.200:22 iptables -t nat -A PREROUTING -i eth0 -p tcp --dport 2222 -j DNAT --to-destination 192.168.1.200:22","2-永久开启重启生效生产环境推荐#2. 永久开启（重启生效，生产环境推荐）":"编辑内核参数配置文件：\n/etc/sysctl.confnet.ipv4.ip_forward = 1 生效配置：\nsysctl -p","3-可选放行对应端口的入站流量避免被默认策略拦截#3. 可选：放行对应端口的入站流量（避免被默认策略拦截）":"若网关 INPUT 链默认策略为 DROP，需放行映射的端口：\n# 放行外网访问 80 端口 iptables -A INPUT -i eth0 -p tcp --dport 80 -j ACCEPT # 放行外网访问 2222 端口 iptables -A INPUT -i eth0 -p tcp --dport 2222 -j ACCEPT # 放行已建立的连接（确保返回数据能通过） iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT","centosrhel-系统#CentOS/RHEL 系统":"# 保存规则到配置文件 iptables-save \u003e /etc/sysconfig/iptables # 开机自启 iptables systemctl enable iptables \u0026\u0026 systemctl restart iptables","ubuntudebian-系统#Ubuntu/Debian 系统":"# 安装规则持久化工具 apt-get install -y iptables-persistent # 保存规则（自动写入 /etc/iptables/rules.v4） netfilter-persistent save","关键参数说明#关键参数说明":"参数 作用 -t nat 指定操作 nat 表（SNAT/DNAT 均在 nat 表中配置） -A POSTROUTING 在 POSTROUTING 链添加规则（数据包路由后、发送前修改源 IP） -s 192.168.1.0/24 匹配内网网段（仅对该网段的流量生效） -o eth0 指定出站网卡（即网关的外网网卡） --to-source 203.0.113.10 替换后的源 IP（网关公网 IP）","关键参数说明-1#关键参数说明":"参数 作用 -A PREROUTING 在 PREROUTING 链添加规则（数据包路由前修改目标 IP / 端口） -i eth0 指定入站网卡（即网关的外网网卡，仅匹配外网请求） --dport 80 匹配外网请求的目标端口（网关公网 IP 的端口） --to-destination 192.168.1.200:80 转发后的内网服务器 IP 和端口","场景-1snat-配置内网主机通过网关访问外网#场景 1：SNAT 配置（内网主机通过网关访问外网）":"","场景-2dnat-配置外网访问内网服务端口映射#场景 2：DNAT 配置（外网访问内网服务，端口映射）":"","基础准备开启-ip-转发所有场景必做#基础准备：开启 IP 转发（所有场景必做）":"","常见问题与注意事项#常见问题与注意事项":"NAT 不生效？ 检查 IP 转发是否开启：cat /proc/sys/net/ipv4/ip_forward（返回 1 才正确）。\n检查规则顺序：PREROUTING 链规则在前，POSTROUTING 链在后；入站放行规则需匹配映射端口。\n检查网卡名称：确认 -i（入站）、-o（出站）网卡名称正确（用 ip addr 查看）。\n外网能访问映射服务，但内网访问公网 IP 无法访问？ 原因：内网主机访问网关公网 IP 时，DNAT 生效但返回路径未经过 SNAT，需添加 “内网访问公网 IP 映射” 规则： iptables -t nat -A PREROUTING -s 192.168.1.0/24 -d 203.0.113.10 -p tcp --dport 80 -j DNAT --to-destination 192.168.1.200:80 云服务器配置 DNAT 无效？ 云服务器（阿里云、腾讯云等）的公网 IP 是厂商提供的 “弹性 IP”，需先在云控制台配置 “端口转发” 或 “安全组”，开放对应端口，否则外网流量无法到达服务器。 批量删除 NAT 规则？ # 清空 nat 表的 PREROUTING 链（DNAT 规则） iptables -t nat -F PREROUTING # 清空 nat 表的 POSTROUTING 链（SNAT 规则） iptables -t nat -F POSTROUTING","方式-1固定公网-ip-场景网关有静态公网-ip#方式 1：固定公网 IP 场景（网关有静态公网 IP）":"# 配置 SNAT：内网网段 192.168.1.0/24 的流量，源 IP 替换为网关外网 IP（203.0.113.10） iptables -t nat -A POSTROUTING -s 192.168.1.0/24 -o eth0 -j SNAT --to-source 203.0.113.10","方式-2动态公网-ip-场景网关拨号上网ip-不固定#方式 2：动态公网 IP 场景（网关拨号上网，IP 不固定）":"用 MASQUERADE 替代 SNAT，自动适配公网 IP 变化：\n# 动态伪装内网 IP，适用于 ADSL 拨号、DHCP 获取公网 IP 的场景 iptables -t nat -A POSTROUTING -s 192.168.1.0/24 -o eth0 -j MASQUERADE","核心概念先明确#核心概念先明确":"SNAT（Source NAT）：修改数据包的源 IP，用于内网主机通过网关服务器访问外网（解决内网 IP 无法直接路由的问题）。\nDNAT（Destination NAT）：修改数据包的目标 IP / 端口，用于将外网请求映射到内网服务器（如发布内网服务到公网）。\n前提条件：网关服务器需开启 IP 转发功能（必须先配置，否则 NAT 不生效）。","环境假设#环境假设":"网关服务器有两块网卡：\n内网网卡：eth1，IP：192.168.1.2（内网网段：192.168.1.0/24）\n外网网卡：eth0，IP：203.0.113.10（公网 IP，可访问互联网）\n内网主机：192.168.1.100（重要：网关指向 192.168.1.2）","环境假设-1#环境假设":"网关服务器：外网网卡 eth0（IP：203.0.113.10），内网网卡 eth1（IP：192.168.1.1）\n内网服务器：192.168.1.200（提供 Web 服务，端口 80；SSH 服务，端口 22）\n需求：\n外网用户访问网关公网 IP 的 80 端口 → 转发到内网 192.168.1.200:80（Web 服务）\n外网用户访问网关公网 IP 的 2222 端口 → 转发到内网 192.168.1.200:22（SSH 服务，避免直接暴露 22 端口）","配置命令dnat-端口映射#配置命令（DNAT 端口映射）":"","配置命令snat-两种常用方式#配置命令（SNAT 两种常用方式）":"","重要操作保存-nat-规则避免重启失效#重要操作：保存 NAT 规则（避免重启失效）":"","需求#需求":"内网主机（192.168.1.100）通过网关服务器的公网 IP（203.0.113.10）访问外网，外网返回的数据通过网关转发回内网主机。","验证方法#验证方法":"内网主机（192.168.1.100）执行 ping 测试： ping 223.5.5.5 # ping 阿里云 DNS，测试外网连通性 网关服务器查看 nat 表规则： iptables -t nat -L POSTROUTING -n # 查看 SNAT 规则是否存在 外网服务器查看访问日志（如 Web 服务器），会显示访问源 IP 为网关公网 IP（203.0.113.10）。","验证方法-1#验证方法":"外网主机测试 Web 服务： curl http://203.0.113.10 # 应返回内网 192.168.1.200 的 Web 页面 外网主机测试 SSH 服务： ssh -p 2222 用户名@203.0.113.10 # 应连接到内网 192.168.1.200 的 SSH 网关查看 DNAT 规则和连接状态： iptables -t nat -L PREROUTING -n # 查看 DNAT 规则 netstat -an | grep :80 # 查看 80 端口连接（应显示内网服务器的连接）"},"title":"Iptables之nat配置"},"/docs/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/iptables%E5%9F%BA%E7%A1%80/":{"data":{"":"","centosrhel-系统#CentOS/RHEL 系统":"# 保存规则到配置文件 service iptables save # 或 iptables-save \u003e /etc/sysconfig/iptables # 设置开机自启（确保规则加载） systemctl enable iptables systemctl start iptables","ubuntudebian-系统#Ubuntu/Debian 系统":"默认无内置保存工具，需安装 iptables-persistent：\n# 安装工具 apt-get install -y iptables-persistent # 保存规则（保存后重启自动加载） netfilter-persistent save # 或手动保存到文件 iptables-save \u003e /etc/iptables/rules.v4","关键参数说明#关键参数说明":"参数 作用 -i eth0 指定网卡（公网网卡），仅匹配该网卡的流量 -p tcp 指定协议（TCP，80/443/22 均为 TCP 协议） --dport 指定 “目标端口”（即服务器开放的端口） -s 目标IP 指定 “源 IP”（仅允许该 IP 访问对应端口） -j ACCEPT 匹配后放行流量 -m state --state RELATED,ESTABLISHED 匹配 “已建立的连接” 或 “与已建立连接相关的流量”（如服务器访问外部后，外部返回的数据）","场景-1只允许指定-ip-访问服务器全局限制#场景 1：只允许指定 IP 访问服务器（全局限制）":"","场景-2公网仅开放-80443-端口22-端口仅指定-ip-访问内网互通#场景 2：公网仅开放 80/443 端口，22 端口仅指定 IP 访问，内网互通":"","场景-3补充说明内网互通的其他实现方式#场景 3：补充说明（内网互通的其他实现方式）":"若内网有多网段（如 192.168.1.0/24 和 192.168.2.0/24），需放行所有内网网段：\n# 放行 192.168.1.0/24 网段 iptables -A INPUT -s 192.168.1.0/24 -j ACCEPT # 放行 192.168.2.0/24 网段 iptables -A INPUT -s 192.168.2.0/24 -j ACCEPT 若需允许服务器主动访问内网其他主机（出站流量），确保 OUTPUT 链策略为 ACCEPT（默认通常如此）：\niptables -P OUTPUT ACCEPT","核心前提说明#核心前提说明":"以下命令均需 root 权限 执行（或前缀加 sudo）。\niptables 规则默认保存在内存中，重启后失效，配置完成后需执行 “保存命令”（见文末）。\n假设环境：\n公网网卡：eth0（可根据实际修改，如 ens33、eth1）\n内网网卡：eth1（内网网段示例：192.168.1.0/24）\n本地回环：lo（必须放行，否则影响本地服务通信）","注意事项#注意事项":"先放行关键 IP / 端口：配置 DROP 默认策略前，务必先放行 SSH 管理 IP（如 192.168.1.100），否则会被踢下线，无法远程恢复。\n网卡名称确认：通过 ip addr 命令查看实际网卡名称（如 ens33、eth0），避免配置错误。\n协议匹配：80/443/22 均为 TCP 协议，需指定 -p tcp；若需开放 UDP 端口（如 53 DNS），需改为 -p udp。\n云服务器安全组：若为云服务器（阿里云、腾讯云等），需同时在云厂商的 “安全组” 中开放对应端口，否则 iptables 配置生效但外部仍无法访问。","逻辑解释#逻辑解释":"-s：指定 “源 IP”（即访问方的 IP）。\nDROP：默认拒绝所有未匹配的入站流量，安全性最高（需确保已放行必要 IP，否则会失联）。\n若需添加多个 IP，重复执行 iptables -A INPUT -s 目标IP -j ACCEPT 即可。","配置命令#配置命令":"# 1. 清空现有规则（可选，首次配置建议执行） iptables -F iptables -X # 2. 放行本地回环（必须保留） iptables -A INPUT -i lo -j ACCEPT # 3. 放行已建立的连接（避免连接中断，如 SSH 登录后不被踢掉） iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT # 4. 允许指定 IP 访问（添加需要放行的 IP） iptables -A INPUT -s 192.168.1.100 -j ACCEPT # 内网管理机 iptables -A INPUT -s 203.0.113.20 -j ACCEPT # 外网固定 IP # 5. 拒绝所有其他入站请求（默认策略，放在最后） iptables -P INPUT DROP","配置命令-1#配置命令":"# 1. 清空现有规则（可选） iptables -F iptables -X # 2. 放行本地回环 iptables -A INPUT -i lo -j ACCEPT # 3. 放行已建立的连接（关键：允许服务器主动发起的连接返回数据） iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT # 4. 内网互通：允许内网网段（192.168.1.0/24）所有入站流量 iptables -A INPUT -i eth1 -s 192.168.1.0/24 -j ACCEPT # 按内网网卡限制 # 或（不限制网卡，仅按网段）：iptables -A INPUT -s 192.168.1.0/24 -j ACCEPT # 5. 22 端口（SSH）：仅允许指定 IP 访问 iptables -A INPUT -p tcp --dport 22 -s 192.168.1.100 -j ACCEPT # 内网管理机 iptables -A INPUT -p tcp --dport 22 -s 203.0.113.20 -j ACCEPT # 外网管理 IP # 6. 公网开放 80/443 端口（TCP 协议） iptables -A INPUT -i eth0 -p tcp --dport 80 -j ACCEPT # HTTP iptables -A INPUT -i eth0 -p tcp --dport 443 -j ACCEPT # HTTPS # 7. 默认策略：拒绝所有未匹配的入站流量 iptables -P INPUT DROP # （可选）放行出站流量（默认通常为 ACCEPT，若需限制可调整） iptables -P OUTPUT ACCEPT","重要操作保存-iptables-规则避免重启失效#重要操作：保存 iptables 规则（避免重启失效）":"","需求#需求":"仅允许 192.168.1.100（内网管理机）和 203.0.113.20（外网固定 IP）访问服务器所有开放端口，拒绝其他所有 IP。","需求拆解#需求拆解":"公网（eth0 网卡）：仅允许 80（HTTP）、443（HTTPS）端口访问，其他端口拒绝。\n22 端口（SSH）：仅允许 192.168.1.100（内网）和 203.0.113.20（外网管理 IP）访问。\n内网（192.168.1.0/24 网段）：所有主机可互通（任意端口、任意协议）。\n放行已建立的连接，避免通信中断。","验证与调试命令#验证与调试命令":"# 查看当前 iptables 规则（INPUT 链） iptables -L INPUT -n --line-numbers # 测试端口是否可访问（从外部主机执行） telnet 服务器IP 80 # 测试 80 端口 telnet 服务器IP 22 # 测试 22 端口（仅指定 IP 可通） # 清空所有规则（出错时紧急恢复） iptables -F iptables -X iptables -P INPUT ACCEPT # 临时放行所有入站，避免失联"},"title":"Iptables基础"},"/docs/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/tcpdump/":{"data":{"":"","1-抓取指定-ip-的数据包#1. 抓取指定 IP 的数据包":"tcpdump host 10.0.0.5","2-抓取指定网段的数据包#2. 抓取指定网段的数据包":"tcpdump net 192.168.1.0/24","3-抓取指定端口的数据包#3. 抓取指定端口的数据包":"tcpdump port 80","4-抓取多个端口的数据包#4. 抓取多个端口的数据包":"tcpdump port 80 or port 443 or port 8080","5-抓取指定-ip--端口的数据包#5. 抓取指定 IP + 端口的数据包":"tcpdump host 192.168.1.10 and port 8080","6-抓包内容保存到文件#6. 抓包内容保存到文件":"tcpdump host 192.168.1.10 and port 8080 -w /tmp/test.cap","7-docker容器内容抓包#7. docker容器内容抓包":"# 获取容器PID docker inspect --format \"{{ .State.Pid }}\" f6b48371b16d # 根据容器PID抓网卡eth0包 nsenter -n -t 25235 tcpdump -i eth0 -w /tmp/test.cap","基础说明#基础说明":"tcpdump 是 Linux 系统中强大的网络抓包工具，支持按 IP 地址、端口号、协议类型等条件过滤数据包，适用于网络故障排查、流量分析等场景。","常用辅助选项提升抓包效率#常用辅助选项（提升抓包效率）":"选项 作用 示例 -i 指定抓包网卡（如 eth0、ens33，any 表示所有网卡） tcpdump -i eth0 port 80 -w 将抓包结果保存到文件（后续可用 Wireshark 分析） tcpdump -i any host 192.168.1.10 -w capture.pcap -r 读取保存的抓包文件 tcpdump -r capture.pcap -n 不解析域名（显示 IP 地址，加快抓包速度） tcpdump -n port 443 -nn 不解析域名和端口名称（显示原始端口号） tcpdump -nn host 203.0.113.5 -v 显示详细抓包信息（-vv 更详细，-vvv 最详细） tcpdump -v tcp port 22 -c 指定抓包数量（抓够指定数量后自动退出） tcpdump -c 100 port 80（抓取 100 个包） -A 以 ASCII 格式显示数据包内容（方便查看 HTTP 等明文数据） tcpdump -A host 192.168.1.10 and port 80","示例#示例":""},"title":"Tcpdump"},"/docs/%E8%84%9A%E6%9C%AC%E5%B7%A5%E5%85%B7/":{"data":{"":"","简介#简介":"发布一些自己编写的脚本工具。"},"title":"脚本工具"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/":{"data":{"":"","简介#简介":"介绍一些运维需要掌握的服务部署和使用。"},"title":"运维服务"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/archery/":{"data":{"":"","简介#简介":"Archery是一款开源的数据库安全审计系统，主要用于监控和分析数据库操作行为，以增强数据库安全性并符合合规性要求。它通过捕获并分析SQL语句，帮助企业和组织了解、审查并控制对数据库的访问及操作，从而有效预防潜在的数据泄露风险。","部署#部署":"# 下载 wget https://github.com/hhyo/Archery/archive/refs/tags/v1.11.3.tar.gz # 解压 tar xf Archery-1.11.3.tar.gz # 启动 cd Archery-1.11.3/src/docker-compose/ docker-compose -f docker-compose.yml up -d # 表结构初始化 docker exec -ti archery /bin/bash cd /opt/archery source /opt/venv4archery/bin/activate python3 manage.py makemigrations sql python3 manage.py migrate # 数据初始化 python3 manage.py dbshell"},"title":"Archery"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/elk/":{"data":{"":"","启动#启动":"docker compose up -d","简介#简介":"ELK 是一套由 Elasticsearch、Logstash 和 Kibana 组成的开源工具，用于搜索、分析和可视化数据。","设置密码#设置密码":"修改配置elasticsearch.yml\nelasticsearch.yml# 1. 开启X-Pack安全认证（核心开关，7.7.0必须加） xpack.security.enabled: true # 2. 关闭SSL证书校验（7.7.0关键，否则启动失败，纯账号密码认证） xpack.security.transport.ssl.enabled: false # 3. 允许远程访问（保证Kibana能连接ES，已配置可忽略） network.host: 0.0.0.0 discovery.type: single-node 重启elasticsearch容器，并进入容器执行命令设置密码。\n# 执行初始化密码命令（7.7.0专属，固定命令） elasticsearch-setup-passwords interactive Initiating the setup of passwords for reserved users elastic,apm_system,kibana,logstash_system,beats_system. You will be prompted to enter passwords as the process progresses. Please confirm that you would like to continue [y/N] → 输入 y 回车 Enter password for [elastic]: → 输入你的密码（如Elk@7700），回车 Reenter password for [elastic]: → 重复输入密码，回车 Enter password for [apm_system]: → 输入密码，回车 ...（依次为kibana、logstash_system、beats_system设置密码，建议统一设为同一个） 设置kibana密码\nserver.name: kibana server.host: \"0\" elasticsearch.hosts: [ \"http://elasticsearch:9200\" ] xpack.monitoring.ui.container.elasticsearch.enabled: true i18n.locale: \"zh-CN\" # 配置ES的超级管理员账号（固定为elastic） elasticsearch.username: \"elastic\" # 配置该账号对应的密码（和你刚才为elastic设置的密码一致） elasticsearch.password: \"你设置的ES密码\" # 开启Kibana登录认证（7.7.0建议开启） xpack.security.enabled: true 设置logstat密码\ninput { # 来源beats beats { # 端口 port =\u003e \"5044\" } } output { elasticsearch { hosts =\u003e [\"http://elasticsearch:9200\"] # 按天生成索引 index =\u003e \"log-%{+YYYY.MM.dd}\" # 配置ES账号密码 user =\u003e \"elastic\" password =\u003e \"你设置的ES密码\" } stdout { codec =\u003e rubydebug } } 重启elk服务\ndocker compose restart","访问#访问":"curl http://127.0.0.1:5601","部署#部署":"创建es数据目录data和插件目录plugins\nmkdir data plugins chmod 777 data plugins 创建elasticsearch.yml\ncat \u003e elasticsearch.yml \u003c"},"title":"Elk"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/frp/":{"data":{"":"","下载#下载":"访问官方下载地址：https://github.com/fatedier/frp/releases 根据系统选择对应安装包（示例：Linux 服务器选 frp_0.65.0_linux_amd64.tar.gz 目录结构说明\n解压后核心文件如下（多余文件可删除，仅保留以下核心文件）：\n文件名 作用 适用端 frps 服务器端主程序 服务器 frps.toml 服务器端配置文件（v0.50+） 服务器 frpc 客户端主程序 内网设备 frpc.toml 客户端配置文件（v0.50+） 内网设备 frps.ini 旧版服务器配置文件（可选） 服务器（兼容旧版） frpc.ini 旧版客户端配置文件（可选） 客户端（兼容旧版）","启动客户端#启动客户端":"临时启动（测试使用）\n./frpc -c ./frpc.toml 后台启动（正式使用）\n创建服务文件\ncat \u003e /etc/systemd/system/frpc.service \u003c","启动服务器端#启动服务器端":"临时启动（测试用）\n./frps -c ./frps.toml 后台启动（生产环境）\n创建服务文件：\ncat \u003e /etc/systemd/system/frps.service \u003c","客户端frpc配置#客户端（frpc）配置":"frpc.toml# 服务端信息 serverAddr = \"公网ip，服务端地址\" serverPort = 20001 # 连接协议 transport.protocol = \"tcp\" # 认证方式 auth.method = \"token\" auth.token = \"aabbcc112233\" # 代理配置 [[proxies]] name = \"test_1\" type = \"tcp\" localIP = \"127.0.0.1\" localPort = 22 remotePort = 20002 [[proxies]] name = \"test_2\" type = \"tcp\" localIP = \"127.0.0.1\" localPort = 5001 remotePort = 20003","服务器端frps配置#服务器端（frps）配置":"frps.toml# 绑定监听地址（默认 `0.0.0.0` 代表监听所有 IP） bindAddr = \"0.0.0.0\" bindPort = 20001 # Web 控制台（Dashboard）配置 webServer.addr = \"0.0.0.0\" webServer.port = 7500 webServer.user = \"moxi\" webServer.password = \"abc123\" # 认证方式（防止未经授权的客户端连接） auth.method = \"token\" auth.token = \"aabbcc112233\" # 端口限制 allowPorts = [ { start = 20000, end = 20010 } ]"},"title":"Frp"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/gitlab/":{"data":{"":"","启动#启动":"docker compose up -d","简介#简介":"GitLab 是一个基于 Git 的开源版本控制和协作平台，旨在支持软件开发的整个生命周期，包括源代码管理、持续集成/持续部署（CI/CD）、项目管理和监控等功能。它提供了一系列工具，帮助团队高效地协作和交付软件。","访问#访问":"curl http://192.168.40.10:8999 ​","部署#部署":"docker-compose.yamlcat \u003e docker-compose.yaml \u003c"},"title":"Gitlab"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/grafana/":{"data":{"启动#启动":"docker compose up -d","简介#简介":"简介Grafana 是一个开源的可视化和分析平台，主要用于监控和数据展示。它支持多种数据源，允许用户通过动态仪表板来实时查看和分析数据，广泛应用于 IT 监控、业务分析和运营分析等领域。","部署#部署":"cat \u003e docker-compose.yaml \u003c"},"title":"Grafana"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/harbor/":{"data":{"":"","简介#简介":"Harbor 是一个开源的云原生注册中心，用于管理和分发容器镜像。它提供了一个安全、高效且功能丰富的平台，旨在为企业级应用提供镜像存储和管理服务。","访问#访问":"默认账号：admin 密码：Harbor12345\ncurl http://192.168.40.10","部署#部署":"安装包已绑定到博客上方\n# 下载 wget https://github.com/goharbor/harbor/releases/download/v2.10.3/harbor-online-installer-v2.10.3.tgz # 解压 tar xf harbor-online-installer-v2.10.3.tgz cd harbor # 复制配置模板为配置文件 cp harbor.yml.tmpl harbor.yml # 修改配置，默认端口为80，如果需要修改端口，请自行修改harbor.yml配置 ## 改为本机ip sed -i 's/hostname: reg.mydomain.com/hostname: 192.168.40.10/g' harbor.yml ## 关闭https sed -i 's/https:/#https:/g' harbor.yml sed -i 's/port: 443/#port: 443/g' harbor.yml sed -i 's#certificate: /your/certificate/path#\\#certificate: /your/certificate/path#g' harbor.yml sed -i 's#private_key: /your/private/key/path#\\#private_key: /your/private/key/path#g' harbor.yml # 安装，自动生成docker-compose.yaml文件，并启动 ./install.sh"},"title":"Harbor"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/jenkins/":{"data":{"":"","启动#启动":"docker compose up -d # 访问 curl http://127.0.0.1:8080","简介#简介":"Jenkins 是一个开源的自动化服务器，广泛用于持续集成（CI）和持续交付（CD）过程。它能够帮助开发团队自动化构建、测试和部署软件，从而提高开发效率和软件质量。","部署#部署":"cat \u003e docker-compose.yaml \u003c","配置#配置":"查看日志，获取32位字符串（类似）：a371e758bc1f44f4960a5f53358f1070 浏览器访问jenkins，配置时，需要该字符串\n# 查看日志 docker logs jenkins"},"title":"Jenkins"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/mindoc/":{"data":{"":"","启动#启动":"docker compose up -d","简介#简介":"Mindoc 是一个开源的在线文档管理和协作平台，旨在简化文档的创建、管理和共享。它通常用于团队内部知识管理、项目文档编写和技术文档存储。","访问#访问":"默认账号：admin 密码：123456\ncurl http://127.0.0.1:8181","部署#部署":"cat \u003e docker-compose.yaml \u003c"},"title":"Mindoc"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/nacos/":{"data":{"":"","启动#启动":"docker compose up -d","简介#简介":"Nacos（Naming and Configuration Service）是一个开源的动态服务发现、配置管理和服务管理平台，旨在帮助微服务架构中的服务治理。它由阿里巴巴开发，广泛应用于云原生应用和微服务环境中。","部署#部署":"docker-compose.yaml\ncat \u003e docker-compose.yaml \u003c"},"title":"Nacos"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/nextcloud/":{"data":{"":"","启动#启动":"docker compose up -d","简介#简介":"Nextcloud 是一个开源的云存储和文件共享平台，旨在为用户提供安全、私有的文件管理和协作解决方案。它可以自托管在用户自己的服务器上，确保数据的隐私和安全性。","访问#访问":"浏览器直接输入部署的主机ip加9091即可\ncurl http://127.0.0.1:9091","部署#部署":"cat \u003e docker-compose.yaml \u003c"},"title":"Nextcloud"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/nexus/":{"data":{"":"","启动#启动":"docker compose up -d","简介#简介":"Nexus Repository Manager 是一个强大的开源仓库管理工具，主要用于存储和管理软件包、构件和依赖项。它支持多种格式，包括 Maven、npm、Docker、NuGet 等，帮助开发团队更有效地管理其开发和发布流程。","访问#访问":"登录时会提示密码存放位置，第一次登录需要改密码\ncurl http://127.0.0.1:8081","部署#部署":"docker-compose.yamlservices: nexus: image: sonatype/nexus3:3.67.1-java11 # 镜像版本 container_name: nexus # 容器名称 restart: always # 自动重启 environment: - TZ=Asia/Shanghai # 设置时区 ports: - \"8081:8081\" # 端口映射 volumes: # 持久化数据 - nexus_data:/nexus-data deploy: resources: limits: cpus: \"1\" # 限制 CPU 核心数，nexus建议4核cpu memory: \"2G\" # 限制内存大小 volumes: nexus_data:"},"title":"Nexus"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/nginx/":{"data":{"":"","初始化操作#初始化操作":"# 创建目录 mkdir -p ./nginx/html ./nginx/conf.d # 拷贝nginx配置文件 docker run --rm -it nginx:latest cat /etc/nginx/conf.d/default.conf \u003e ./nginx/conf.d/default.conf docker run --rm -it nginx:latest cat /etc/nginx/nginx.conf \u003e ./nginx/nginx.conf docker run --rm -it nginx:latest cat /usr/share/nginx/html/index.html \u003e ./nginx/html/index.html","启动#启动":"docker compose up -d ​","部署#部署":"docker-compose.yamlversion: '3.8' services: nginx: image: nginx:latest container_name: nginx # 容器名称 restart: always # 自动重启 environment: - TZ=Asia/Shanghai # 设置时区 ports: - \"80:80\" # 映射端口 deploy: resources: limits: cpus: \"0.5\" # 限制 CPU 核心数 memory: \"512M\" # 限制内存大小 volumes: - ./nginx/html:/usr/share/nginx/html # 数据持久化 - ./nginx/conf.d:/etc/nginx/conf.d # 配置持久化 - ./nginx/nginx.conf:/etc/nginx/nginx.conf # 配置持久化"},"title":"Nginx"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/nginxwebui/":{"data":{"":"","简介#简介 ":"Nginx Web UI 是一个用于管理和配置 Nginx 服务器的用户界面工具。它提供直观的图形界面，使得用户能够更方便地设置和维护 Nginx 配置，而无需直接编辑配置文件。","部署#部署":"docker-compose.yamlversion: '3.8' services: nginxwebui: image: cym1102/nginxwebui:4.2.4 container_name: nginxwebui # 容器名称 restart: always # 自动重启 environment: BOOT_OPTIONS: \"--server.port=8081\" # 定义服务访问端口 privileged: true # 特权模式 network_mode: \"host\" # host网络模式 deploy: resources: limits: cpus: \"0.5\" # 限制 CPU 核心数 memory: \"512M\" # 限制内存大小 volumes: - ./nginxWebUI:/home/nginxWebUI # 数据持久化 ## 启动\ndocker compose up -d ​"},"title":"Nginxwebui"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/openvpn/":{"data":{"":"","客户端#客户端":"复制创建用户生成的 test.ovpn 到 客户端机器上的 /etc/openvpn/client/\n安装openvpn包\nyum -y install epel-release yum -y install openvpn 启动客户端\nopenvpn --daemon --cd /etc/openvpn/client/ --config test.ovpn --log-append /var/log/test-vpn.log","服务端操作#服务端操作":"初始化, 注意修改公网ip地址\ndocker run -v ./openvpn:/etc/openvpn --rm kylemanna/openvpn ovpn_genconfig -u udp://公网地址 docker run -v ./openvpn:/etc/openvpn --rm -it kylemanna/openvpn ovpn_initpki 启动\ndocker run -v ./openvpn:/etc/openvpn -d -p 1194:1194/udp --cap-add=NET_ADMIN kylemanna/openvpn 修改，需重启服务生效\n./openvpn/openvpn.conf# 客户端连接分配的ip池 server 192.168.254.0 255.255.255.0 verb 3 key /etc/openvpn/pki/private/123.60.11.34.key ca /etc/openvpn/pki/ca.crt cert /etc/openvpn/pki/issued/123.60.11.34.crt dh /etc/openvpn/pki/dh.pem tls-auth /etc/openvpn/pki/ta.key key-direction 0 keepalive 10 60 persist-key persist-tun proto udp # Rely on Docker to do port mapping, internally always 1194 port 1194 dev tun0 status /tmp/openvpn-status.log user nobody group nogroup comp-lzo no ### Route Configurations Below route 192.168.253.0 255.255.255.0 # 客户端可以连接的服务端网段 ### Push Configurations Below push \"route 192.168.0.0 255.255.255.0\" push \"comp-lzo no\" 创建test用户\ndocker run -v ./openvpn:/etc/openvpn --rm -it kylemanna/openvpn easyrsa build-client-full test nopass docker run -v ./openvpn:/etc/openvpn --rm kylemanna/openvpn ovpn_getclient test \u003e /tmp/test.ovpn 删除用户\ndocker run -v openvpn-data:/etc/openvpn --rm -it kylemanna/openvpn easyrsa revoke test docker run -v openvpn-data:/etc/openvpn --rm -it kylemanna/openvpn easyrsa gen-crl","简介#简介":"OpenVPN 是一个开源的虚拟私人网络（VPN）解决方案，广泛用于安全地连接远程用户和分支机构到企业网络。它通过安全的隧道加密技术，确保数据在不安全的网络上进行安全传输。","部署#部署":""},"title":"Openvpn"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/promethous/":{"data":{"prometheus简介#Prometheus简介":"Prometheus简介Prometheus 是一个开源监控系统和时序数据库，主要用于收集和存储监控指标。它由 SoundCloud 开发，现已成为 Cloud Native Computing Foundation (CNCF) 的一部分。","启动#启动":"docker compose up -d","部署#部署":"docker-compose.yaml\nversion: '3.8' services: prometheus: image: prom/prometheus container_name: prometheus restart: always environment: - TZ=Asia/Shanghai # 设置时区 ports: - \"9090:9090\" volumes: - prom_conf:/etc/prometheus - prom_data:/prometheus command: - '--config.file=/etc/prometheus/prometheus.yml' - '--storage.tsdb.path=/prometheus' - '--web.enable-admin-api' # 控制对admin HTTP API的访问，其中包括删除时间序列等功能 - '--web.enable-lifecycle' # 支持热更新，直接执行localhost:9090/-/reload立即生效 deploy: resources: limits: cpus: \"1\" # 限制 CPU 核心数 memory: \"2G\" # 限制内存大小 alertmanager: image: prom/alertmanager container_name: alertmanager restart: always environment: - TZ=Asia/Shanghai # 设置时区 ports: - \"9093:9093\" volumes: - alert_conf:/etc/alertmanager deploy: resources: limits: cpus: \"1\" # 限制 CPU 核心数 memory: \"1G\" # 限制内存大小 volumes: prom_data: prom_conf: alert_conf:"},"title":"Promethous"},"/docs/%E8%BF%90%E7%BB%B4%E6%9C%8D%E5%8A%A1/zabbix/":{"data":{"":"","启动#启动":"docker compose up -d","简介#简介":"Zabbix 是一个开源的监控解决方案，主要用于监控 IT 基础设施的性能和可用性。它能够监控多种资源，包括服务器、网络设备、虚拟机和云服务等。以下是 Zabbix 的一些关键特点和功能：","访问#访问":"curl https://127.0.0.1:80","部署#部署":"version: \"3.5\" services: mysql-server: image: mysql:5.7 container_name: mysql-server restart: unless-stopped command: --character-set-server=utf8 --collation-server=utf8_bin --sql_mode=STRICT_TRANS_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION --lower_case_table_names=1 environment: - MYSQL_DATABASE=zabbix - MYSQL_USER=zabbix - MYSQL_PASSWORD=zabbix - MYSQL_ROOT_PASSWORD=zabbix ports: - 3306:3306 volumes: - /etc/localtime:/etc/localtime:ro - /data/zabbix-mysql:/var/lib/mysql:rw zabbix-server-mysql: image: zabbix/zabbix-server-mysql:alpine-5.0-latest container_name: zabbix-server-mysql restart: unless-stopped environment: - DB_SERVER_HOST=mysql-server - MYSQL_USER=zabbix - MYSQL_PASSWORD=zabbix - MYSQL_DATABASE=zabbix - MYSQL_ROOT_PASSWORD=zabbix ports: - 10051:10051 links: - mysql-server depends_on: - mysql-server volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - /data/zabbix:/etc/zabbix/ zabbix-web: image: zabbix/zabbix-web-nginx-mysql:alpine-5.0-latest container_name: zabbix-web-nginx-mysql restart: unless-stopped environment: - DB_SERVER_HOST=mysql-server - MYSQL_USER=zabbix - MYSQL_PASSWORD=zabbix - MYSQL_DATABASE=zabbix - MYSQL_ROOT_PASSWORD=zabbix - PHP_TZ=Asia/Shanghai ports: - 80:8080 volumes: - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro - /data/zabbix-web:/usr/share/zabbix/assets/fonts links: - mysql-server - zabbix-server-mysql depends_on: - mysql-server - zabbix-server-mysql"},"title":"Zabbix"},"/docs/docker/":{"data":{"":"","简介#简介":"介绍一些docker使用技术和经验。"},"title":"docker"},"/docs/docker/docker%E5%9F%BA%E7%A1%80/":{"data":{"":"","1-centos-7-安装步骤#1. CentOS 7 安装步骤":"# 1. 卸载旧版本（若有） yum remove docker docker-client docker-client-latest docker-common docker-latest docker-latest-logrotate docker-logrotate docker-engine # 2. 安装依赖包 yum install -y yum-utils device-mapper-persistent-data lvm2 # 3. 设置 Docker 官方仓库（国内推荐阿里云镜像加速） yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo # 4. 安装 Docker CE（社区版，免费） yum install -y docker-ce docker-ce-cli containerd.io # 5. 启动 Docker 并设置开机自启 systemctl start docker systemctl enable docker # 6. 验证安装成功（显示版本即正常） docker --version","2-配置国内镜像加速解决拉取镜像慢的问题#2. 配置国内镜像加速（解决拉取镜像慢的问题）":"默认从 Docker Hub 拉取镜像较慢，配置阿里云 / 网易云加速：\n# 1. 创建配置目录 mkdir -p /etc/docker # 2. 编写配置文件（以下加速地址暂时可用） cat \u003e /etc/docker/daemon.json \u003c","一docker-核心概念先搞懂再动手#一、Docker 核心概念（先搞懂再动手）":"在开始操作前，先明确 3 个核心概念，避免 confusion：\n镜像（Image）：Docker 应用的 “安装包”，包含运行应用所需的代码、依赖、环境配置（如 CentOS 镜像、Nginx 镜像）。\n容器（Container）：镜像的 “运行实例”，是独立的可执行环境（类似轻量级虚拟机，但更高效），多个容器可共享同一个镜像。\n仓库（Repository）：存放镜像的 “仓库”（类似 GitHub），官方仓库是 Docker Hub，包含海量开源镜像。","三docker-核心命令#三、Docker 核心命令":"命令 功能 示例 docker pull 镜像名:标签 拉取镜像（标签默认 latest，即最新版） docker pull nginx:1.24（拉取 Nginx 1.24 版本） docker images 查看本地所有镜像 docker images（显示镜像名、标签、ID、大小） docker rmi 镜像ID/镜像名 删除镜像（需先停止依赖该镜像的容器） docker rmi nginx:1.24 或 docker rmi 0e901e68141f docker search 镜像名 搜索 Docker Hub 上的镜像 docker search mysql（搜索 MySQL 镜像） docker save -o 文件名.tar 镜像名 导出镜像到本地文件 docker save -o nginx.tar nginx:1.24 docker load -i 文件名.tar 从本地文件导入镜像 docker load -i nginx.tar docker ps 查看运行中的容器 docker ps（-a 查看所有容器，包括停止的） docker start 容器名/容器ID 启动已停止的容器 docker start mynginx docker stop 容器名/容器ID 停止运行中的容器 docker stop mynginx（kill 强制停止：docker kill mynginx） docker restart 容器名/容器ID 重启容器 docker restart mynginx docker exec -it 容器名/容器ID 命令 进入运行中的容器（交互式） docker exec -it mynginx /bin/bash（进入 Nginx 容器终端） docker logs 容器名/容器ID 查看容器日志 docker logs -f mynginx（-f 实时跟踪日志） docker rm 容器名/容器ID 删除容器（需先停止容器） docker rm mynginx（强制删除运行中的容器：docker rm -f mynginx） docker inspect 容器名/容器ID 查看容器详细信息（IP、挂载等） docker inspect mynginx","二docker-安装#二、Docker 安装":"","四清理磁盘空间#四、清理磁盘空间":"# 清理停止的容器 docker container prune # 清理无用镜像（无标签、未被容器使用） docker image prune -a # 清理无用数据卷 docker volume prune # 一键清理所有无用资源（容器、镜像、网络、数据卷） docker system prune -af"},"title":"Docker基础"},"/docs/docker/docker%E9%85%8D%E7%BD%AE/":{"data":{"":"/etc/docker/daemon.json 是 Docker 守护进程（dockerd）的核心配置文件，用于自定义 Docker 的运行参数（如镜像加速、网络、存储、日志等）。默认情况下该文件可能不存在，需手动创建并配置，修改后需重启 Docker 服务生效。","1-文件格式#1. 文件格式":"严格遵循 JSON 语法（键值对、逗号分隔、字符串用双引号）。\n注释：JSON 本身不支持注释，若需添加注释，需使用工具（如 jq）处理，或部署时移除注释。\n生效方式：修改后执行 systemctl daemon-reload \u0026\u0026 systemctl restart docker 重启 Docker 服务。\n验证配置：docker info 可查看配置是否生效（如镜像加速地址、存储驱动等）。","1-镜像加速配置最常用#1. 镜像加速配置（最常用）":"解决 Docker 拉取镜像慢的问题，优先配置国内镜像源。\n参数 类型 说明 示例 registry-mirrors 数组（字符串） 镜像仓库加速地址列表，按顺序优先级匹配 阿里云、网易云、Docker 中国官方加速 示例配置：\n{ \"registry-mirrors\": [ \"https://xxxx.mirror.aliyuncs.com\", // 阿里云专属加速（需登录阿里云容器镜像服务获取） \"https://hub-mirror.c.163.com\", // 网易云加速（公开） \"https://docker.mirrors.ustc.edu.cn\" // 中科大加速（公开） ] }","2-网络配置#2. 网络配置":"自定义 Docker 网络相关参数（如默认网段、端口映射范围、DNS 等）。\n参数 类型 说明 示例 bip 字符串 桥接网络（bridge）的默认网关和子网 \"bip\": \"172.17.0.1/16\"（默认是 172.17.0.1/16） default-address-pools 数组 自定义 Docker 网络地址池（避免与内网网段冲突） 见下方示例 dns 数组（字符串） 容器默认 DNS 服务器列表 \"dns\": [\"223.5.5.5\", \"8.8.8.8\"]（阿里云 DNS + Google DNS） dns-search 数组（字符串） DNS 搜索域（容器内解析域名时自动拼接） \"dns-search\": [\"docker.internal\", \"company.com\"] ipv6 布尔值 是否启用 IPv6 支持 \"ipv6\": true fixed-cidr-v6 字符串 IPv6 固定子网 \"fixed-cidr-v6\": \"2001:db8::/64\" port-range 字符串 允许 Docker 映射的端口范围（默认 49153-65535） \"port-range\": \"30000-32767\" 示例配置（解决网段冲突）：\n{ \"bip\": \"172.31.0.1/16\", // 自定义 bridge 网络网关和子网 \"default-address-pools\": [ { \"base\": \"172.32.0.0/16\", \"size\": 24 }, { \"base\": \"172.33.0.0/16\", \"size\": 24 } ], \"dns\": [\"223.5.5.5\", \"8.8.8.8\"] }","2-默认配置路径#2. 默认配置路径":"Linux：/etc/docker/daemon.json\nWindows：C:\\ProgramData\\docker\\config\\daemon.json\nmacOS（Docker Desktop）：通过 GUI 配置（偏好设置 → Docker Engine），底层对应 ~/.docker/daemon.json","3-存储配置#3. 存储配置":"自定义 Docker 存储驱动、数据存储路径、镜像和容器限制等。\n参数 类型 说明 示例 data-root 字符串 Docker 数据存储根目录（默认 /var/lib/docker） \"data-root\": \"/data/docker\"（迁移 Docker 数据到 /data 分区） storage-driver 字符串 存储驱动（推荐 overlay2，Docker 18.09+ 默认） \"storage-driver\": \"overlay2\" storage-opts 数组（字符串） 存储驱动额外参数（如 overlay2 的日志大小限制） \"storage-opts\": [\"overlay2.override_kernel_check=true\", \"overlay2.size=100G\"] max-concurrent-downloads 整数 同时下载镜像的最大线程数（默认 3，提升下载速度） \"max-concurrent-downloads\": 10 max-concurrent-uploads 整数 同时上传镜像的最大线程数（默认 5） \"max-concurrent-uploads\": 5 log-driver 字符串 容器日志驱动（默认 json-file，可选 journald、syslog、fluentd 等） \"log-driver\": \"json-file\" log-opts 对象 日志驱动参数（如日志大小、滚动数量） 见下方示例 示例配置（存储优化 + 日志限制）：\n{ \"data-root\": \"/data/docker\", // 迁移数据目录到大容量分区 \"storage-driver\": \"overlay2\", \"storage-opts\": [\"overlay2.size=100G\"], // 每个容器最大磁盘占用 100G \"max-concurrent-downloads\": 10, // 加速镜像下载 \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"10m\", // 单个日志文件最大 10MB \"max-file\": \"3\" // 最多保留 3 个日志文件（滚动删除） } }","4-安全配置#4. 安全配置":"限制 Docker 权限、启用 TLS 认证、配置信任镜像仓库等。\n参数 类型 说明 示例 tls 布尔值 是否启用 TLS 认证（远程访问 Docker 时加密） \"tls\": true tlscacert 字符串 TLS 根证书路径 \"tlscacert\": \"/etc/docker/ca.pem\" tlscert 字符串 TLS 客户端证书路径 \"tlscert\": \"/etc/docker/cert.pem\" tlskey 字符串 TLS 客户端密钥路径 \"tlskey\": \"/etc/docker/key.pem\" tlsverify 布尔值 是否验证服务端证书 \"tlsverify\": true insecure-registries 数组（字符串） 信任的非 HTTPS 镜像仓库（如私有仓库） \"insecure-registries\": [\"192.168.1.100:5000\"] allow-nondistributable-artifacts 数组（字符串） 允许推送非分布式镜像到指定仓库 \"allow-nondistributable-artifacts\": [\"192.168.1.100:5000\"] live-restore 布尔值 Docker 守护进程重启时，保持容器运行（避免服务中断） \"live-restore\": true 示例配置（私有仓库信任 + TLS 认证）：\n{ \"insecure-registries\": [\"192.168.1.100:5000\"], // 信任内网 HTTP 私有仓库 \"tls\": true, \"tlscacert\": \"/etc/docker/ca.pem\", \"tlscert\": \"/etc/docker/server-cert.pem\", \"tlskey\": \"/etc/docker/server-key.pem\", \"tlsverify\": true, \"live-restore\": true // 守护进程重启不影响运行中的容器 }","5-资源限制配置#5. 资源限制配置":"限制 Docker 占用的系统资源（CPU、内存、PID 等）。\n参数 类型 说明 示例 default-shm-size 字符串 容器默认共享内存大小（默认 64M，部分服务如 Chrome、Elasticsearch 需增大） \"default-shm-size\": \"2G\" oom-score-adjust 整数 Docker 守护进程的 OOM 优先级（-1000 到 1000，数值越低越不容易被 OOM 杀死） \"oom-score-adjust\": -1000 max-pids 整数 所有容器的最大 PID 总数限制（避免容器占用过多进程） \"max-pids\": 10000 cpu-shares 整数 Docker 整体 CPU 权重（相对值，默认 1024） \"cpu-shares\": 2048 memory-limit 字符串 Docker 整体内存限制（默认无限制） \"memory-limit\": \"16G\" 示例配置（资源限制）：\n{ \"default-shm-size\": \"2G\", // 默认共享内存 2G \"oom-score-adjust\": -1000, // 避免 Docker 被 OOM 杀死 \"max-pids\": 10000, // 最大进程数 10000 \"memory-limit\": \"16G\" // 限制 Docker 总内存占用不超过 16G }","6-其他实用配置#6. 其他实用配置":"参数 类型 说明 示例 experimental 布尔值 是否启用 Docker 实验性特性（如 Buildx、IPv6 等） \"experimental\": true features 对象 启用特定特性（如 buildkit 构建引擎） \"features\": {\"buildkit\": true} labels 数组（字符串） 给 Docker 守护进程添加标签（用于集群管理） \"labels\": [\"env=production\", \"owner=devops\"] log-level 字符串 日志级别（debug/info/warn/error/fatal，默认 info） \"log-level\": \"warn\"","一配置文件基础说明#一、配置文件基础说明":"","二核心配置参数详解按功能分类#二、核心配置参数详解（按功能分类）":""},"title":"Docker配置"},"/docs/k8s/":{"data":{"":"","简介#简介":"介绍一些k8s使用技术和经验。"},"title":"k8s"},"/docs/linux/":{"data":{"":"包含各个linux系统的配置"},"title":"linux"},"/docs/linux/%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93%E5%A4%A7%E5%85%A8/":{"data":{"":"","alpine#alpine":"sed -i 's/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g' /etc/apk/repositories apk update","centos7#centos7":"curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo yum clean all yum makecache","debian#debian":"debian 9-11 sed -i 's/deb.debian.org/mirrors.aliyun.com/g' /etc/apt/sources.list sed -i 's/security.debian.org/mirrors.aliyun.com/g' /etc/apt/sources.list apt update debian 12 sed -i 's/deb.debian.org/mirrors.aliyun.com/g' /etc/apt/sources.list.d/debian.sources sed -i 's/security.debian.org/mirrors.aliyun.com/g' /etc/apt/sources.list.d/debian.sources apt update","golang#golang":"临时配置 # 直接写入 Go 环境配置（跨终端生效） go env -w GOPROXY=https://mirrors.aliyun.com/goproxy/,direct # 查看所有 Go 环境变量，确认 GOPROXY 已修改 go env 永久配置 ~/.bashrcexport GOPROXY=https://mirrors.aliyun.com/goproxy/,direct","npm#npm":"临时生效 npm install [包名] --registry=https://registry.npmmirror.com 永久配置 # 设置 npm 全局镜像源为淘宝源（核心命令） npm config set registry https://registry.npmmirror.com # 验证是否设置成功 npm config get registry","python#Python":"临时配置 pip install [包名] -i https://mirrors.aliyun.com/pypi/simple/ 永久配置 # 设置阿里云源为全局默认（推荐） pip config set global.index-url https://mirrors.aliyun.com/pypi/simple/ # 验证是否配置成功 pip config get global.index-url","rocky9#rocky9":"sed -e 's|^mirrorlist=|#mirrorlist=|g' \\ -e 's|^#baseurl=http://dl.rockylinux.org/$contentdir|baseurl=https://mirrors.aliyun.com/rockylinux|g' \\ -i.bak \\ /etc/yum.repos.d/[Rr]ocky*.repo makecache","ubuntu#ubuntu":"sed -i 's/archive.ubuntu.com/mirrors.aliyun.com/g' /etc/apt/sources.list sed -i 's/security.ubuntu.com/mirrors.aliyun.com/g' /etc/apt/sources.list apt update"},"title":"镜像仓库大全"},"/showcase/":{"data":{"":"开发常用工具集合网站 it-tools 热点新闻集合网站 news AI集合网站 AI 一个代理工具 creamdata 中国科学技术大学测速网站 wan 查询ip归属网站 ipshu 毫秒镜像加速 docker"},"title":"工具展示"}}